(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["wbm-tag-manager-ecomm"],{

/***/ "Bys/":
/*!***************************************************************************************!*\
  !*** /app/custom/plugins/WbmTagManagerEcomm/src/Resources/app/storefront/src/main.js ***!
  \***************************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var src_plugin_system_plugin_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/plugin-system/plugin.manager */ \"Cxgn\");\n/* harmony import */ var _plugin_datalayer_plugin__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plugin/datalayer.plugin */ \"ffMp\");\n/* harmony import */ var _plugin_productClickTracking_plugin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./plugin/productClickTracking.plugin */ \"VIO2\");\n/* harmony import */ var _plugin_promotions_plugin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./plugin/promotions.plugin */ \"v0id\");\n/* harmony import */ var _listener_windowLoad_listener__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./listener/windowLoad.listener */ \"Ugru\");\n/* harmony import */ var _listener_windowLoad_listener__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_listener_windowLoad_listener__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _service_http_client_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./service/http-client.service */ \"csG+\");\n/* harmony import */ var _subscriber_cookieConfigurationUpdate_subscriber__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./subscriber/cookieConfigurationUpdate.subscriber */ \"Wh65\");\n/* eslint-disable import/no-unresolved */\n\n\n\n\n\n\n\nsrc_plugin_system_plugin_manager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].register('WbmDataLayer', _plugin_datalayer_plugin__WEBPACK_IMPORTED_MODULE_1__[\"default\"]);\nsrc_plugin_system_plugin_manager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].register('ProductClickTracking', _plugin_productClickTracking_plugin__WEBPACK_IMPORTED_MODULE_2__[\"default\"], '.product-box a', {\n  parent: '.product-box'\n});\nsrc_plugin_system_plugin_manager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].register('ProductClickTracking', _plugin_productClickTracking_plugin__WEBPACK_IMPORTED_MODULE_2__[\"default\"], '.product-box button', {\n  parent: '.product-box'\n});\nsrc_plugin_system_plugin_manager__WEBPACK_IMPORTED_MODULE_0__[\"default\"].register('Promotions', _plugin_promotions_plugin__WEBPACK_IMPORTED_MODULE_3__[\"default\"]); // Necessary for the webpack hot module reloading server\n\nif (false) {}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQnlzLy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vYXBwL2N1c3RvbS9wbHVnaW5zL1dibVRhZ01hbmFnZXJFY29tbS9zcmMvUmVzb3VyY2VzL2FwcC9zdG9yZWZyb250L3NyYy9tYWluLmpzP2MwNTciXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLXVucmVzb2x2ZWQgKi9cbmltcG9ydCBQbHVnaW5NYW5hZ2VyIGZyb20gJ3NyYy9wbHVnaW4tc3lzdGVtL3BsdWdpbi5tYW5hZ2VyJztcbmltcG9ydCBXYm1EYXRhTGF5ZXIgZnJvbSBcIi4vcGx1Z2luL2RhdGFsYXllci5wbHVnaW5cIjtcbmltcG9ydCBQcm9kdWN0Q2xpY2tUcmFja2luZyBmcm9tICcuL3BsdWdpbi9wcm9kdWN0Q2xpY2tUcmFja2luZy5wbHVnaW4nO1xuaW1wb3J0IFByb21vdGlvbnMgZnJvbSAnLi9wbHVnaW4vcHJvbW90aW9ucy5wbHVnaW4nO1xuXG5pbXBvcnQgJy4vbGlzdGVuZXIvd2luZG93TG9hZC5saXN0ZW5lcic7XG5pbXBvcnQgJy4vc2VydmljZS9odHRwLWNsaWVudC5zZXJ2aWNlJztcbmltcG9ydCAnLi9zdWJzY3JpYmVyL2Nvb2tpZUNvbmZpZ3VyYXRpb25VcGRhdGUuc3Vic2NyaWJlcic7XG5cblBsdWdpbk1hbmFnZXIucmVnaXN0ZXIoJ1dibURhdGFMYXllcicsIFdibURhdGFMYXllcik7XG5QbHVnaW5NYW5hZ2VyLnJlZ2lzdGVyKCdQcm9kdWN0Q2xpY2tUcmFja2luZycsIFByb2R1Y3RDbGlja1RyYWNraW5nLCAnLnByb2R1Y3QtYm94IGEnLCB7IHBhcmVudDogJy5wcm9kdWN0LWJveCcgfSk7XG5QbHVnaW5NYW5hZ2VyLnJlZ2lzdGVyKCdQcm9kdWN0Q2xpY2tUcmFja2luZycsIFByb2R1Y3RDbGlja1RyYWNraW5nLCAnLnByb2R1Y3QtYm94IGJ1dHRvbicsIHsgcGFyZW50OiAnLnByb2R1Y3QtYm94JyB9KTtcblBsdWdpbk1hbmFnZXIucmVnaXN0ZXIoJ1Byb21vdGlvbnMnLCBQcm9tb3Rpb25zKTtcblxuLy8gTmVjZXNzYXJ5IGZvciB0aGUgd2VicGFjayBob3QgbW9kdWxlIHJlbG9hZGluZyBzZXJ2ZXJcbmlmIChtb2R1bGUuaG90KSB7XG4gICAgbW9kdWxlLmhvdC5hY2NlcHQoKTtcbn1cbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///Bys/\n");

/***/ }),

/***/ "Ugru":
/*!***************************************************************************************************************!*\
  !*** /app/custom/plugins/WbmTagManagerEcomm/src/Resources/app/storefront/src/listener/windowLoad.listener.js ***!
  \***************************************************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("console.log('windowLoad.listener');\n\nif (typeof onEventDataLayer !== 'undefined') {\n  window.addEventListener('load', function () {\n    console.log('send from listener file');\n    window.dataLayer.push(onEventDataLayer);\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVWdydS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vYXBwL2N1c3RvbS9wbHVnaW5zL1dibVRhZ01hbmFnZXJFY29tbS9zcmMvUmVzb3VyY2VzL2FwcC9zdG9yZWZyb250L3NyYy9saXN0ZW5lci93aW5kb3dMb2FkLmxpc3RlbmVyLmpzPzYyNTUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc29sZS5sb2coJ3dpbmRvd0xvYWQubGlzdGVuZXInKTtcblxuaWYgKHR5cGVvZiBvbkV2ZW50RGF0YUxheWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnc2VuZCBmcm9tIGxpc3RlbmVyIGZpbGUnKTtcbiAgICAgICAgd2luZG93LmRhdGFMYXllci5wdXNoKG9uRXZlbnREYXRhTGF5ZXIpO1xuXG4gICAgfSk7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///Ugru\n");

/***/ }),

/***/ "VIO2":
/*!*********************************************************************************************************************!*\
  !*** /app/custom/plugins/WbmTagManagerEcomm/src/Resources/app/storefront/src/plugin/productClickTracking.plugin.js ***!
  \*********************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ProductClickTracking; });\n/* harmony import */ var src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/plugin-system/plugin.class */ \"FGIj\");\n/* harmony import */ var src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/helper/dom-access.helper */ \"gHbT\");\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\nvar ProductClickTracking =\n/*#__PURE__*/\nfunction (_Plugin) {\n  _inherits(ProductClickTracking, _Plugin);\n\n  function ProductClickTracking() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProductClickTracking);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProductClickTracking)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"impressions\", null);\n\n    return _this;\n  }\n\n  _createClass(ProductClickTracking, [{\n    key: \"init\",\n    value: function init() {\n      if (gtmIsTrackingProductClicks !== true) {\n        return;\n      }\n\n      this.registerEvents();\n    }\n  }, {\n    key: \"registerEvents\",\n    value: function registerEvents() {\n      var self = this;\n      this.el.addEventListener('click', function (event) {\n        self.onProductClicked(event);\n      });\n    }\n  }, {\n    key: \"setImpressions\",\n    value: function setImpressions() {\n      var dataLayer = [window.dataLayer];\n\n      if (typeof onEventDataLayer !== 'undefined') {\n        dataLayer.push(onEventDataLayer);\n      }\n\n      if (dataLayer) {\n        for (var i = 0; i < dataLayer.length; i++) {\n          for (var j = 0; j < dataLayer[i].length; j++) {\n            var layer = dataLayer[i][j];\n\n            if (layer.ecommerce && layer.ecommerce.impressions) {\n              this.impressions = layer.ecommerce.impressions;\n            }\n          }\n        }\n      }\n\n      if (this.impressions === null || this.impressions.length === 0) {\n        throw new InvalidImpressionsError('no impressions found');\n      }\n    }\n  }, {\n    key: \"onProductClicked\",\n    value: function onProductClicked(event) {\n      if (src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hasAttribute(this.el, 'href')) {\n        event.preventDefault();\n      }\n\n      try {\n        this.setImpressions();\n        var parent = this.el.closest(this.options.parent);\n        var inputField = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(parent, '[itemprop=\"sku\"]');\n        var productNo = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getAttribute(inputField, 'content');\n        var product = this.impressions.find(function (value, index) {\n          return value.id === productNo;\n        });\n\n        if (product === undefined) {\n          throw new InvalidImpressionsError('product not found in impressions');\n        }\n\n        window.dataLayer.push({\n          event: 'productClick',\n          ecommerce: {\n            click: {\n              actionField: {\n                list: product.list\n              },\n              products: [product]\n            }\n          }\n        });\n      } catch (e) {// if something went wrong, just go on ...\n      }\n\n      if (src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].hasAttribute(this.el, 'href')) {\n        document.location = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getAttribute(this.el, 'href');\n      }\n    }\n  }]);\n\n  return ProductClickTracking;\n}(src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n\n\nvar InvalidImpressionsError =\n/*#__PURE__*/\nfunction (_Error) {\n  _inherits(InvalidImpressionsError, _Error);\n\n  function InvalidImpressionsError(message) {\n    var _this2;\n\n    _classCallCheck(this, InvalidImpressionsError);\n\n    _this2 = _possibleConstructorReturn(this, _getPrototypeOf(InvalidImpressionsError).call(this, message));\n    _this2.name = 'InvalidImpressionsError';\n    return _this2;\n  }\n\n  return InvalidImpressionsError;\n}(_wrapNativeSuper(Error));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVklPMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vYXBwL2N1c3RvbS9wbHVnaW5zL1dibVRhZ01hbmFnZXJFY29tbS9zcmMvUmVzb3VyY2VzL2FwcC9zdG9yZWZyb250L3NyYy9wbHVnaW4vcHJvZHVjdENsaWNrVHJhY2tpbmcucGx1Z2luLmpzPzBiNDEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFBsdWdpbiBmcm9tICdzcmMvcGx1Z2luLXN5c3RlbS9wbHVnaW4uY2xhc3MnO1xuaW1wb3J0IERvbUFjY2VzcyBmcm9tICdzcmMvaGVscGVyL2RvbS1hY2Nlc3MuaGVscGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZHVjdENsaWNrVHJhY2tpbmcgZXh0ZW5kcyBQbHVnaW4ge1xuICAgIGltcHJlc3Npb25zID0gbnVsbDtcblxuICAgIGluaXQoKSB7XG4gICAgICAgIGlmIChndG1Jc1RyYWNraW5nUHJvZHVjdENsaWNrcyAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudHMoKTtcbiAgICB9XG5cbiAgICByZWdpc3RlckV2ZW50cygpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHNlbGYub25Qcm9kdWN0Q2xpY2tlZChldmVudCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldEltcHJlc3Npb25zKCkge1xuICAgICAgICBjb25zdCBkYXRhTGF5ZXIgPSBbXG4gICAgICAgICAgICB3aW5kb3cuZGF0YUxheWVyXG4gICAgICAgIF07XG4gICAgICAgIGlmICh0eXBlb2Ygb25FdmVudERhdGFMYXllciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKG9uRXZlbnREYXRhTGF5ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGFMYXllcikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhTGF5ZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGRhdGFMYXllcltpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXllciA9IGRhdGFMYXllcltpXVtqXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXIuZWNvbW1lcmNlICYmIGxheWVyLmVjb21tZXJjZS5pbXByZXNzaW9ucykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbXByZXNzaW9ucyA9IGxheWVyLmVjb21tZXJjZS5pbXByZXNzaW9ucztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmltcHJlc3Npb25zID09PSBudWxsIHx8IHRoaXMuaW1wcmVzc2lvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgSW52YWxpZEltcHJlc3Npb25zRXJyb3IoJ25vIGltcHJlc3Npb25zIGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblByb2R1Y3RDbGlja2VkKGV2ZW50KSB7XG4gICAgICAgIGlmIChEb21BY2Nlc3MuaGFzQXR0cmlidXRlKHRoaXMuZWwsICdocmVmJykpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuc2V0SW1wcmVzc2lvbnMoKTtcblxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcy5lbC5jbG9zZXN0KHRoaXMub3B0aW9ucy5wYXJlbnQpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRGaWVsZCA9IERvbUFjY2Vzcy5xdWVyeVNlbGVjdG9yKHBhcmVudCwgJ1tpdGVtcHJvcD1cInNrdVwiXScpO1xuICAgICAgICAgICAgY29uc3QgcHJvZHVjdE5vID0gRG9tQWNjZXNzLmdldEF0dHJpYnV0ZShpbnB1dEZpZWxkLCAnY29udGVudCcpO1xuICAgICAgICAgICAgY29uc3QgcHJvZHVjdCA9IHRoaXMuaW1wcmVzc2lvbnMuZmluZCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmlkID09PSBwcm9kdWN0Tm87XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHByb2R1Y3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbnZhbGlkSW1wcmVzc2lvbnNFcnJvcigncHJvZHVjdCBub3QgZm91bmQgaW4gaW1wcmVzc2lvbnMnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2luZG93LmRhdGFMYXllci5wdXNoKHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3Byb2R1Y3RDbGljaycsXG4gICAgICAgICAgICAgICAgZWNvbW1lcmNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25GaWVsZDogeyBsaXN0OiBwcm9kdWN0Lmxpc3QgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzOiBbcHJvZHVjdF1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBpZiBzb21ldGhpbmcgd2VudCB3cm9uZywganVzdCBnbyBvbiAuLi5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChEb21BY2Nlc3MuaGFzQXR0cmlidXRlKHRoaXMuZWwsICdocmVmJykpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uID0gRG9tQWNjZXNzLmdldEF0dHJpYnV0ZSh0aGlzLmVsLCAnaHJlZicpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBJbnZhbGlkSW1wcmVzc2lvbnNFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSAnSW52YWxpZEltcHJlc3Npb25zRXJyb3InO1xuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0E7QUFDQTs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUZBO0FBREE7QUFGQTtBQVNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FBNUVBO0FBQ0E7QUFEQTtBQUNBO0FBOEVBOzs7OztBQUNBO0FBQUE7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBRkE7QUFHQTtBQUNBOztBQUxBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///VIO2\n");

/***/ }),

/***/ "Wh65":
/*!**********************************************************************************************************************************!*\
  !*** /app/custom/plugins/WbmTagManagerEcomm/src/Resources/app/storefront/src/subscriber/cookieConfigurationUpdate.subscriber.js ***!
  \**********************************************************************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var src_plugin_cookie_cookie_configuration_plugin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/plugin/cookie/cookie-configuration.plugin */ \"t8WJ\");\nconsole.log('cookieConfigurationUpdate.subscriber');\n\n\nfunction eventCallback(updatedCookies) {\n  if (typeof updatedCookies.detail['wbm-tagmanager-enabled'] !== 'undefined' && updatedCookies.detail['wbm-tagmanager-enabled'] && !window.wbmScriptIsSet) {\n    var newScript = document.createElement('script');\n    var inlineScript = document.createTextNode(\"(\".concat(window.googleTag, \")(window,document,'script','dataLayer', '\").concat(window.wbmGoogleTagmanagerId, \"');\"));\n    newScript.appendChild(inlineScript);\n    var script = document.getElementById('wbmTagManger');\n    script.parentNode.insertBefore(newScript, script.nextSibling);\n    window.wbmScriptIsSet = true;\n    window.googleTag = null;\n  }\n}\n\ndocument.$emitter.subscribe(src_plugin_cookie_cookie_configuration_plugin__WEBPACK_IMPORTED_MODULE_0__[\"COOKIE_CONFIGURATION_UPDATE\"], eventCallback);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiV2g2NS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vYXBwL2N1c3RvbS9wbHVnaW5zL1dibVRhZ01hbmFnZXJFY29tbS9zcmMvUmVzb3VyY2VzL2FwcC9zdG9yZWZyb250L3NyYy9zdWJzY3JpYmVyL2Nvb2tpZUNvbmZpZ3VyYXRpb25VcGRhdGUuc3Vic2NyaWJlci5qcz9jYjYxIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnNvbGUubG9nKCdjb29raWVDb25maWd1cmF0aW9uVXBkYXRlLnN1YnNjcmliZXInKTtcblxuaW1wb3J0IHsgQ09PS0lFX0NPTkZJR1VSQVRJT05fVVBEQVRFIH0gZnJvbSAnc3JjL3BsdWdpbi9jb29raWUvY29va2llLWNvbmZpZ3VyYXRpb24ucGx1Z2luJztcblxuZnVuY3Rpb24gZXZlbnRDYWxsYmFjayh1cGRhdGVkQ29va2llcykge1xuICAgIGlmICh0eXBlb2YgdXBkYXRlZENvb2tpZXMuZGV0YWlsWyd3Ym0tdGFnbWFuYWdlci1lbmFibGVkJ10gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICYmIHVwZGF0ZWRDb29raWVzLmRldGFpbFsnd2JtLXRhZ21hbmFnZXItZW5hYmxlZCddXG4gICAgICAgICYmICF3aW5kb3cud2JtU2NyaXB0SXNTZXRcbiAgICApIHtcbiAgICAgICAgY29uc3QgbmV3U2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICAgIGNvbnN0IGlubGluZVNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFxuICAgICAgICAgICAgYCgke3dpbmRvdy5nb29nbGVUYWd9KSh3aW5kb3csZG9jdW1lbnQsJ3NjcmlwdCcsJ2RhdGFMYXllcicsICcke3dpbmRvdy53Ym1Hb29nbGVUYWdtYW5hZ2VySWR9Jyk7YFxuICAgICAgICApO1xuICAgICAgICBuZXdTY3JpcHQuYXBwZW5kQ2hpbGQoaW5saW5lU2NyaXB0KTtcblxuICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2JtVGFnTWFuZ2VyJyk7XG4gICAgICAgIHNjcmlwdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShuZXdTY3JpcHQsIHNjcmlwdC5uZXh0U2libGluZyk7XG5cbiAgICAgICAgd2luZG93LndibVNjcmlwdElzU2V0ID0gdHJ1ZTtcbiAgICAgICAgd2luZG93Lmdvb2dsZVRhZyA9IG51bGw7XG4gICAgfVxufVxuZG9jdW1lbnQuJGVtaXR0ZXIuc3Vic2NyaWJlKENPT0tJRV9DT05GSUdVUkFUSU9OX1VQREFURSwgZXZlbnRDYWxsYmFjayk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUdBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///Wh65\n");

/***/ }),

/***/ "bK22":
/*!**********************************************!*\
  !*** ./plugin/offcanvas/offcanvas.plugin.js ***!
  \**********************************************/
/*! exports provided: OffCanvasInstance, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"OffCanvasInstance\", function() { return OffCanvasInstance; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return OffCanvas; });\n/* harmony import */ var src_helper_device_detection_helper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/helper/device-detection.helper */ \"41MI\");\n/* harmony import */ var src_helper_emitter_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/helper/emitter.helper */ \"+F6M\");\n/* harmony import */ var src_utility_backdrop_backdrop_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/utility/backdrop/backdrop.util */ \"KeF5\");\n/* harmony import */ var src_helper_iterator_helper__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/helper/iterator.helper */ \"ERap\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\nvar OFF_CANVAS_CLASS = 'offcanvas';\nvar OFF_CANVAS_OPEN_CLASS = 'is-open';\nvar OFF_CANVAS_FULLWIDTH_CLASS = 'is-fullwidth';\nvar OFF_CANVAS_CLOSE_TRIGGER_CLASS = 'js-offcanvas-close';\nvar _REMOVE_OFF_CANVAS_DELAY = 350;\n\nvar OffCanvasSingleton =\n/*#__PURE__*/\nfunction () {\n  function OffCanvasSingleton() {\n    _classCallCheck(this, OffCanvasSingleton);\n\n    this.$emitter = new src_helper_emitter_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n  }\n  /**\n   * Open the offcanvas and its backdrop\n   * @param {string} content\n   * @param {function|null} callback\n   * @param {'left'|'right'|'bottom'} position\n   * @param {boolean} closable\n   * @param {number} delay\n   * @param {boolean} fullwidth\n   * @param {array|string} cssClass\n   */\n\n\n  _createClass(OffCanvasSingleton, [{\n    key: \"open\",\n    value: function open(content, callback, position, closable, delay, fullwidth, cssClass) {\n      // avoid multiple backdrops\n      this._removeExistingOffCanvas();\n\n      var offCanvas = this._createOffCanvas(position, fullwidth, cssClass);\n\n      this.setContent(content, closable, delay);\n\n      this._openOffcanvas(offCanvas, callback);\n    }\n    /**\n     * Method to change the content of the already visible OffCanvas\n     * @param {string} content\n     * @param {boolean} closable\n     * @param {number} delay\n     */\n\n  }, {\n    key: \"setContent\",\n    value: function setContent(content, closable, delay) {\n      var offCanvas = this.getOffCanvas();\n\n      if (!offCanvas[0]) {\n        return;\n      }\n\n      offCanvas[0].innerHTML = content; //register events again\n\n      this._registerEvents(closable, delay);\n    }\n    /**\n     * adds an additional class to the offcanvas\n     *\n     * @param {string} className\n     */\n\n  }, {\n    key: \"setAdditionalClassName\",\n    value: function setAdditionalClassName(className) {\n      var offCanvas = this.getOffCanvas();\n      offCanvas[0].classList.add(className);\n    }\n    /**\n     * Determine list of existing offcanvas\n     * @returns {NodeListOf<Element>}\n     * @private\n     */\n\n  }, {\n    key: \"getOffCanvas\",\n    value: function getOffCanvas() {\n      return document.querySelectorAll(\".\".concat(OFF_CANVAS_CLASS));\n    }\n    /**\n     * Close the offcanvas and its backdrop when the browser goes back in history\n     * @param {number} delay\n     */\n\n  }, {\n    key: \"close\",\n    value: function close(delay) {\n      var _this = this;\n\n      // remove open class to make any css animation effects possible\n      var OffCanvasElements = this.getOffCanvas();\n      src_helper_iterator_helper__WEBPACK_IMPORTED_MODULE_3__[\"default\"].iterate(OffCanvasElements, function (backdrop) {\n        return backdrop.classList.remove(OFF_CANVAS_OPEN_CLASS);\n      }); // wait before removing backdrop to let css animation effects take place\n\n      setTimeout(this._removeExistingOffCanvas.bind(this), delay);\n      src_utility_backdrop_backdrop_util__WEBPACK_IMPORTED_MODULE_2__[\"default\"].remove(delay);\n      setTimeout(function () {\n        _this.$emitter.publish('onCloseOffcanvas', {\n          offCanvasContent: OffCanvasElements\n        });\n      }, delay);\n    }\n    /**\n     * Callback for close button, goes back in browser history to trigger close\n     * @returns {void}\n     */\n\n  }, {\n    key: \"goBackInHistory\",\n    value: function goBackInHistory() {\n      window.history.back();\n    }\n    /**\n     * Returns whether any OffCanvas exists or not\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      return this.getOffCanvas().length > 0;\n    }\n    /**\n     * Opens the offcanvas and its backdrop\n     *\n     * @param {HTMLElement} offCanvas\n     * @param {function} callback\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_openOffcanvas\",\n    value: function _openOffcanvas(offCanvas, callback) {\n      // the timeout allows to apply the animation effects\n      setTimeout(function () {\n        src_utility_backdrop_backdrop_util__WEBPACK_IMPORTED_MODULE_2__[\"default\"].create(function () {\n          offCanvas.classList.add(OFF_CANVAS_OPEN_CLASS);\n          window.history.pushState('offcanvas-open', ''); // if a callback function is being injected execute it after opening the OffCanvas\n\n          if (typeof callback === 'function') {\n            callback();\n          }\n        });\n      }, 75);\n    }\n    /**\n     * Register events\n     * @param {boolean} closable\n     * @param {number} delay\n     * @private\n     */\n\n  }, {\n    key: \"_registerEvents\",\n    value: function _registerEvents(closable, delay) {\n      var _this2 = this;\n\n      var event = src_helper_device_detection_helper__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isTouchDevice() ? 'touchstart' : 'click';\n\n      if (closable) {\n        var onBackdropClick = function onBackdropClick() {\n          _this2.close(delay); // remove the event listener immediately to avoid multiple listeners\n\n\n          document.removeEventListener(src_utility_backdrop_backdrop_util__WEBPACK_IMPORTED_MODULE_2__[\"BACKDROP_EVENT\"].ON_CLICK, onBackdropClick);\n        };\n\n        document.addEventListener(src_utility_backdrop_backdrop_util__WEBPACK_IMPORTED_MODULE_2__[\"BACKDROP_EVENT\"].ON_CLICK, onBackdropClick);\n      }\n\n      window.addEventListener('popstate', this.close.bind(this, delay), {\n        once: true\n      });\n      var closeTriggers = document.querySelectorAll(\".\".concat(OFF_CANVAS_CLOSE_TRIGGER_CLASS));\n      src_helper_iterator_helper__WEBPACK_IMPORTED_MODULE_3__[\"default\"].iterate(closeTriggers, function (trigger) {\n        return trigger.addEventListener(event, _this2.goBackInHistory.bind(_this2));\n      });\n    }\n    /**\n     * Remove all existing offcanvas from DOM\n     * @private\n     */\n\n  }, {\n    key: \"_removeExistingOffCanvas\",\n    value: function _removeExistingOffCanvas() {\n      var offCanvasElements = this.getOffCanvas();\n      return src_helper_iterator_helper__WEBPACK_IMPORTED_MODULE_3__[\"default\"].iterate(offCanvasElements, function (offCanvas) {\n        return offCanvas.remove();\n      });\n    }\n    /**\n     * Defines the position of the offcanvas by setting css class\n     * @param {'left'|'right'|'bottom'} position\n     * @returns {string}\n     * @private\n     */\n\n  }, {\n    key: \"_getPositionClass\",\n    value: function _getPositionClass(position) {\n      return \"is-\".concat(position);\n    }\n    /**\n     * Creates the offcanvas element prototype including all relevant settings,\n     * appends it to the DOM and returns the HTMLElement for further processing\n     * @param {'left'|'right'|'bottom'} position\n     * @param {boolean} fullwidth\n     * @param {array|string} cssClass\n     * @returns {HTMLElement}\n     * @private\n     */\n\n  }, {\n    key: \"_createOffCanvas\",\n    value: function _createOffCanvas(position, fullwidth, cssClass) {\n      var offCanvas = document.createElement('div');\n      offCanvas.classList.add(OFF_CANVAS_CLASS);\n      offCanvas.classList.add(this._getPositionClass(position));\n\n      if (fullwidth === true) {\n        offCanvas.classList.add(OFF_CANVAS_FULLWIDTH_CLASS);\n      }\n\n      if (cssClass) {\n        var type = _typeof(cssClass);\n\n        if (type === 'string') {\n          offCanvas.classList.add(cssClass);\n        } else if (Array.isArray(cssClass)) {\n          cssClass.forEach(function (value) {\n            offCanvas.classList.add(value);\n          });\n        } else {\n          throw new Error(\"The type \\\"\".concat(type, \"\\\" is not supported. Please pass an array or a string.\"));\n        }\n      }\n\n      document.body.appendChild(offCanvas);\n      return offCanvas;\n    }\n  }]);\n\n  return OffCanvasSingleton;\n}();\n/**\n * Create the OffCanvas instance.\n * @type {Readonly<OffCanvasSingleton>}\n */\n\n\nvar OffCanvasInstance = Object.freeze(new OffCanvasSingleton());\n\nvar OffCanvas =\n/*#__PURE__*/\nfunction () {\n  function OffCanvas() {\n    _classCallCheck(this, OffCanvas);\n  }\n\n  _createClass(OffCanvas, null, [{\n    key: \"open\",\n\n    /**\n     * Open the OffCanvas\n     * @param {string} content\n     * @param {function|null} callback\n     * @param {'left'|'right'|'bottom'} position\n     * @param {boolean} closable\n     * @param {number} delay\n     * @param {boolean} fullwidth\n     * @param {array|string} cssClass\n     */\n    value: function open(content) {\n      var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var position = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'left';\n      var closable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;\n      var delay = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : _REMOVE_OFF_CANVAS_DELAY;\n      var fullwidth = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n      var cssClass = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : '';\n      OffCanvasInstance.open(content, callback, position, closable, delay, fullwidth, cssClass);\n    }\n    /**\n     * Change content of visible OffCanvas\n     * @param {string} content\n     * @param {boolean} closable\n     * @param {number} delay\n     */\n\n  }, {\n    key: \"setContent\",\n    value: function setContent(content) {\n      var closable = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var delay = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _REMOVE_OFF_CANVAS_DELAY;\n      OffCanvasInstance.setContent(content, closable, delay);\n    }\n    /**\n     * adds an additional class to the offcanvas\n     *\n     * @param {string} className\n     */\n\n  }, {\n    key: \"setAdditionalClassName\",\n    value: function setAdditionalClassName(className) {\n      OffCanvasInstance.setAdditionalClassName(className);\n    }\n    /**\n     * Close the OffCanvas\n     * @param {number} delay\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      var delay = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _REMOVE_OFF_CANVAS_DELAY;\n      OffCanvasInstance.close(delay);\n    }\n    /**\n     * Returns whether any OffCanvas exists or not\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"exists\",\n    value: function exists() {\n      return OffCanvasInstance.exists();\n    }\n    /**\n     * returns all existing offcanvas elements\n     *\n     * @returns {NodeListOf<Element>}\n     */\n\n  }, {\n    key: \"getOffCanvas\",\n    value: function getOffCanvas() {\n      return OffCanvasInstance.getOffCanvas();\n    }\n    /**\n     * Expose constant\n     * @returns {number}\n     */\n\n  }, {\n    key: \"REMOVE_OFF_CANVAS_DELAY\",\n    value: function REMOVE_OFF_CANVAS_DELAY() {\n      return _REMOVE_OFF_CANVAS_DELAY;\n    }\n  }]);\n\n  return OffCanvas;\n}();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYksyMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BsdWdpbi9vZmZjYW52YXMvb2ZmY2FudmFzLnBsdWdpbi5qcz82Y2FkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBEZXZpY2VEZXRlY3Rpb24gZnJvbSAnc3JjL2hlbHBlci9kZXZpY2UtZGV0ZWN0aW9uLmhlbHBlcic7XG5pbXBvcnQgTmF0aXZlRXZlbnRFbWl0dGVyIGZyb20gJ3NyYy9oZWxwZXIvZW1pdHRlci5oZWxwZXInO1xuaW1wb3J0IEJhY2tkcm9wLCB7IEJBQ0tEUk9QX0VWRU5UIH0gZnJvbSAnc3JjL3V0aWxpdHkvYmFja2Ryb3AvYmFja2Ryb3AudXRpbCc7XG5pbXBvcnQgSXRlcmF0b3IgZnJvbSAnc3JjL2hlbHBlci9pdGVyYXRvci5oZWxwZXInO1xuXG5jb25zdCBPRkZfQ0FOVkFTX0NMQVNTID0gJ29mZmNhbnZhcyc7XG5jb25zdCBPRkZfQ0FOVkFTX09QRU5fQ0xBU1MgPSAnaXMtb3Blbic7XG5jb25zdCBPRkZfQ0FOVkFTX0ZVTExXSURUSF9DTEFTUyA9ICdpcy1mdWxsd2lkdGgnO1xuY29uc3QgT0ZGX0NBTlZBU19DTE9TRV9UUklHR0VSX0NMQVNTID0gJ2pzLW9mZmNhbnZhcy1jbG9zZSc7XG5jb25zdCBSRU1PVkVfT0ZGX0NBTlZBU19ERUxBWSA9IDM1MDtcblxuY2xhc3MgT2ZmQ2FudmFzU2luZ2xldG9uIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLiRlbWl0dGVyID0gbmV3IE5hdGl2ZUV2ZW50RW1pdHRlcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE9wZW4gdGhlIG9mZmNhbnZhcyBhbmQgaXRzIGJhY2tkcm9wXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufG51bGx9IGNhbGxiYWNrXG4gICAgICogQHBhcmFtIHsnbGVmdCd8J3JpZ2h0J3wnYm90dG9tJ30gcG9zaXRpb25cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNsb3NhYmxlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5XG4gICAgICogQHBhcmFtIHtib29sZWFufSBmdWxsd2lkdGhcbiAgICAgKiBAcGFyYW0ge2FycmF5fHN0cmluZ30gY3NzQ2xhc3NcbiAgICAgKi9cbiAgICBvcGVuKGNvbnRlbnQsIGNhbGxiYWNrLCBwb3NpdGlvbiwgY2xvc2FibGUsIGRlbGF5LCBmdWxsd2lkdGgsIGNzc0NsYXNzKSB7XG4gICAgICAgIC8vIGF2b2lkIG11bHRpcGxlIGJhY2tkcm9wc1xuICAgICAgICB0aGlzLl9yZW1vdmVFeGlzdGluZ09mZkNhbnZhcygpO1xuXG4gICAgICAgIGNvbnN0IG9mZkNhbnZhcyA9IHRoaXMuX2NyZWF0ZU9mZkNhbnZhcyhwb3NpdGlvbiwgZnVsbHdpZHRoLCBjc3NDbGFzcyk7XG4gICAgICAgIHRoaXMuc2V0Q29udGVudChjb250ZW50LCBjbG9zYWJsZSwgZGVsYXkpO1xuICAgICAgICB0aGlzLl9vcGVuT2ZmY2FudmFzKG9mZkNhbnZhcywgY2FsbGJhY2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBjaGFuZ2UgdGhlIGNvbnRlbnQgb2YgdGhlIGFscmVhZHkgdmlzaWJsZSBPZmZDYW52YXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29udGVudFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2xvc2FibGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsYXlcbiAgICAgKi9cbiAgICBzZXRDb250ZW50KGNvbnRlbnQsIGNsb3NhYmxlLCBkZWxheSkge1xuICAgICAgICBjb25zdCBvZmZDYW52YXMgPSB0aGlzLmdldE9mZkNhbnZhcygpO1xuXG4gICAgICAgIGlmICghb2ZmQ2FudmFzWzBdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBvZmZDYW52YXNbMF0uaW5uZXJIVE1MID0gY29udGVudDtcblxuICAgICAgICAvL3JlZ2lzdGVyIGV2ZW50cyBhZ2FpblxuICAgICAgICB0aGlzLl9yZWdpc3RlckV2ZW50cyhjbG9zYWJsZSwgZGVsYXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGFkZHMgYW4gYWRkaXRpb25hbCBjbGFzcyB0byB0aGUgb2ZmY2FudmFzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NOYW1lXG4gICAgICovXG4gICAgc2V0QWRkaXRpb25hbENsYXNzTmFtZShjbGFzc05hbWUpIHtcbiAgICAgICAgY29uc3Qgb2ZmQ2FudmFzID0gdGhpcy5nZXRPZmZDYW52YXMoKTtcbiAgICAgICAgb2ZmQ2FudmFzWzBdLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgbGlzdCBvZiBleGlzdGluZyBvZmZjYW52YXNcbiAgICAgKiBAcmV0dXJucyB7Tm9kZUxpc3RPZjxFbGVtZW50Pn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGdldE9mZkNhbnZhcygpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYC4ke09GRl9DQU5WQVNfQ0xBU1N9YCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIG9mZmNhbnZhcyBhbmQgaXRzIGJhY2tkcm9wIHdoZW4gdGhlIGJyb3dzZXIgZ29lcyBiYWNrIGluIGhpc3RvcnlcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsYXlcbiAgICAgKi9cbiAgICBjbG9zZShkZWxheSkge1xuICAgICAgICAvLyByZW1vdmUgb3BlbiBjbGFzcyB0byBtYWtlIGFueSBjc3MgYW5pbWF0aW9uIGVmZmVjdHMgcG9zc2libGVcbiAgICAgICAgY29uc3QgT2ZmQ2FudmFzRWxlbWVudHMgPSB0aGlzLmdldE9mZkNhbnZhcygpO1xuICAgICAgICBJdGVyYXRvci5pdGVyYXRlKE9mZkNhbnZhc0VsZW1lbnRzLCBiYWNrZHJvcCA9PiBiYWNrZHJvcC5jbGFzc0xpc3QucmVtb3ZlKE9GRl9DQU5WQVNfT1BFTl9DTEFTUykpO1xuXG4gICAgICAgIC8vIHdhaXQgYmVmb3JlIHJlbW92aW5nIGJhY2tkcm9wIHRvIGxldCBjc3MgYW5pbWF0aW9uIGVmZmVjdHMgdGFrZSBwbGFjZVxuICAgICAgICBzZXRUaW1lb3V0KHRoaXMuX3JlbW92ZUV4aXN0aW5nT2ZmQ2FudmFzLmJpbmQodGhpcyksIGRlbGF5KTtcblxuICAgICAgICBCYWNrZHJvcC5yZW1vdmUoZGVsYXkpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy4kZW1pdHRlci5wdWJsaXNoKCdvbkNsb3NlT2ZmY2FudmFzJywge1xuICAgICAgICAgICAgICAgIG9mZkNhbnZhc0NvbnRlbnQ6IE9mZkNhbnZhc0VsZW1lbnRzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZGVsYXkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIGZvciBjbG9zZSBidXR0b24sIGdvZXMgYmFjayBpbiBicm93c2VyIGhpc3RvcnkgdG8gdHJpZ2dlciBjbG9zZVxuICAgICAqIEByZXR1cm5zIHt2b2lkfVxuICAgICAqL1xuICAgIGdvQmFja0luSGlzdG9yeSgpIHtcbiAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBhbnkgT2ZmQ2FudmFzIGV4aXN0cyBvciBub3RcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5nZXRPZmZDYW52YXMoKS5sZW5ndGggPiAwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgb2ZmY2FudmFzIGFuZCBpdHMgYmFja2Ryb3BcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG9mZkNhbnZhc1xuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9vcGVuT2ZmY2FudmFzKG9mZkNhbnZhcywgY2FsbGJhY2spIHtcbiAgICAgICAgLy8gdGhlIHRpbWVvdXQgYWxsb3dzIHRvIGFwcGx5IHRoZSBhbmltYXRpb24gZWZmZWN0c1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIEJhY2tkcm9wLmNyZWF0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgb2ZmQ2FudmFzLmNsYXNzTGlzdC5hZGQoT0ZGX0NBTlZBU19PUEVOX0NMQVNTKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoJ29mZmNhbnZhcy1vcGVuJywgJycpO1xuXG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjYWxsYmFjayBmdW5jdGlvbiBpcyBiZWluZyBpbmplY3RlZCBleGVjdXRlIGl0IGFmdGVyIG9wZW5pbmcgdGhlIE9mZkNhbnZhc1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgNzUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGV2ZW50c1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY2xvc2FibGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZGVsYXlcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9yZWdpc3RlckV2ZW50cyhjbG9zYWJsZSwgZGVsYXkpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSAoRGV2aWNlRGV0ZWN0aW9uLmlzVG91Y2hEZXZpY2UoKSkgPyAndG91Y2hzdGFydCcgOiAnY2xpY2snO1xuXG4gICAgICAgIGlmIChjbG9zYWJsZSkge1xuICAgICAgICAgICAgY29uc3Qgb25CYWNrZHJvcENsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoZGVsYXkpO1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXIgaW1tZWRpYXRlbHkgdG8gYXZvaWQgbXVsdGlwbGUgbGlzdGVuZXJzXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihCQUNLRFJPUF9FVkVOVC5PTl9DTElDSywgb25CYWNrZHJvcENsaWNrKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoQkFDS0RST1BfRVZFTlQuT05fQ0xJQ0ssIG9uQmFja2Ryb3BDbGljayk7XG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmNsb3NlLmJpbmQodGhpcywgZGVsYXkpLCB7IG9uY2U6IHRydWUgfSk7XG4gICAgICAgIGNvbnN0IGNsb3NlVHJpZ2dlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGAuJHtPRkZfQ0FOVkFTX0NMT1NFX1RSSUdHRVJfQ0xBU1N9YCk7XG4gICAgICAgIEl0ZXJhdG9yLml0ZXJhdGUoY2xvc2VUcmlnZ2VycywgdHJpZ2dlciA9PiB0cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXMuZ29CYWNrSW5IaXN0b3J5LmJpbmQodGhpcykpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWxsIGV4aXN0aW5nIG9mZmNhbnZhcyBmcm9tIERPTVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3JlbW92ZUV4aXN0aW5nT2ZmQ2FudmFzKCkge1xuICAgICAgICBjb25zdCBvZmZDYW52YXNFbGVtZW50cyA9IHRoaXMuZ2V0T2ZmQ2FudmFzKCk7XG4gICAgICAgIHJldHVybiBJdGVyYXRvci5pdGVyYXRlKG9mZkNhbnZhc0VsZW1lbnRzLCBvZmZDYW52YXMgPT4gb2ZmQ2FudmFzLnJlbW92ZSgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIHRoZSBwb3NpdGlvbiBvZiB0aGUgb2ZmY2FudmFzIGJ5IHNldHRpbmcgY3NzIGNsYXNzXG4gICAgICogQHBhcmFtIHsnbGVmdCd8J3JpZ2h0J3wnYm90dG9tJ30gcG9zaXRpb25cbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2dldFBvc2l0aW9uQ2xhc3MocG9zaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIGBpcy0ke3Bvc2l0aW9ufWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgb2ZmY2FudmFzIGVsZW1lbnQgcHJvdG90eXBlIGluY2x1ZGluZyBhbGwgcmVsZXZhbnQgc2V0dGluZ3MsXG4gICAgICogYXBwZW5kcyBpdCB0byB0aGUgRE9NIGFuZCByZXR1cm5zIHRoZSBIVE1MRWxlbWVudCBmb3IgZnVydGhlciBwcm9jZXNzaW5nXG4gICAgICogQHBhcmFtIHsnbGVmdCd8J3JpZ2h0J3wnYm90dG9tJ30gcG9zaXRpb25cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGZ1bGx3aWR0aFxuICAgICAqIEBwYXJhbSB7YXJyYXl8c3RyaW5nfSBjc3NDbGFzc1xuICAgICAqIEByZXR1cm5zIHtIVE1MRWxlbWVudH1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9jcmVhdGVPZmZDYW52YXMocG9zaXRpb24sIGZ1bGx3aWR0aCwgY3NzQ2xhc3MpIHtcbiAgICAgICAgY29uc3Qgb2ZmQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIG9mZkNhbnZhcy5jbGFzc0xpc3QuYWRkKE9GRl9DQU5WQVNfQ0xBU1MpO1xuICAgICAgICBvZmZDYW52YXMuY2xhc3NMaXN0LmFkZCh0aGlzLl9nZXRQb3NpdGlvbkNsYXNzKHBvc2l0aW9uKSk7XG5cbiAgICAgICAgaWYgKGZ1bGx3aWR0aCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgb2ZmQ2FudmFzLmNsYXNzTGlzdC5hZGQoT0ZGX0NBTlZBU19GVUxMV0lEVEhfQ0xBU1MpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNzc0NsYXNzKSB7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gdHlwZW9mIGNzc0NsYXNzO1xuXG4gICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBvZmZDYW52YXMuY2xhc3NMaXN0LmFkZChjc3NDbGFzcyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoY3NzQ2xhc3MpKSB7XG4gICAgICAgICAgICAgICAgY3NzQ2xhc3MuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgb2ZmQ2FudmFzLmNsYXNzTGlzdC5hZGQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSB0eXBlIFwiJHt0eXBlfVwiIGlzIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSBwYXNzIGFuIGFycmF5IG9yIGEgc3RyaW5nLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvZmZDYW52YXMpO1xuXG4gICAgICAgIHJldHVybiBvZmZDYW52YXM7XG4gICAgfVxufVxuXG5cbi8qKlxuICogQ3JlYXRlIHRoZSBPZmZDYW52YXMgaW5zdGFuY2UuXG4gKiBAdHlwZSB7UmVhZG9ubHk8T2ZmQ2FudmFzU2luZ2xldG9uPn1cbiAqL1xuZXhwb3J0IGNvbnN0IE9mZkNhbnZhc0luc3RhbmNlID0gT2JqZWN0LmZyZWV6ZShuZXcgT2ZmQ2FudmFzU2luZ2xldG9uKCkpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPZmZDYW52YXMge1xuXG4gICAgLyoqXG4gICAgICogT3BlbiB0aGUgT2ZmQ2FudmFzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufG51bGx9IGNhbGxiYWNrXG4gICAgICogQHBhcmFtIHsnbGVmdCd8J3JpZ2h0J3wnYm90dG9tJ30gcG9zaXRpb25cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNsb3NhYmxlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5XG4gICAgICogQHBhcmFtIHtib29sZWFufSBmdWxsd2lkdGhcbiAgICAgKiBAcGFyYW0ge2FycmF5fHN0cmluZ30gY3NzQ2xhc3NcbiAgICAgKi9cbiAgICBzdGF0aWMgb3Blbihjb250ZW50LCBjYWxsYmFjayA9IG51bGwsIHBvc2l0aW9uID0gJ2xlZnQnLCBjbG9zYWJsZSA9IHRydWUsIGRlbGF5ID0gUkVNT1ZFX09GRl9DQU5WQVNfREVMQVksIGZ1bGx3aWR0aCA9IGZhbHNlLCBjc3NDbGFzcyA9ICcnKSB7XG4gICAgICAgIE9mZkNhbnZhc0luc3RhbmNlLm9wZW4oY29udGVudCwgY2FsbGJhY2ssIHBvc2l0aW9uLCBjbG9zYWJsZSwgZGVsYXksIGZ1bGx3aWR0aCwgY3NzQ2xhc3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoYW5nZSBjb250ZW50IG9mIHZpc2libGUgT2ZmQ2FudmFzXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNsb3NhYmxlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5XG4gICAgICovXG4gICAgc3RhdGljIHNldENvbnRlbnQoY29udGVudCwgY2xvc2FibGUgPSB0cnVlLCBkZWxheSA9IFJFTU9WRV9PRkZfQ0FOVkFTX0RFTEFZKSB7XG4gICAgICAgIE9mZkNhbnZhc0luc3RhbmNlLnNldENvbnRlbnQoY29udGVudCwgY2xvc2FibGUsIGRlbGF5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhZGRzIGFuIGFkZGl0aW9uYWwgY2xhc3MgdG8gdGhlIG9mZmNhbnZhc1xuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNsYXNzTmFtZVxuICAgICAqL1xuICAgIHN0YXRpYyBzZXRBZGRpdGlvbmFsQ2xhc3NOYW1lKGNsYXNzTmFtZSkge1xuICAgICAgICBPZmZDYW52YXNJbnN0YW5jZS5zZXRBZGRpdGlvbmFsQ2xhc3NOYW1lKGNsYXNzTmFtZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvc2UgdGhlIE9mZkNhbnZhc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheVxuICAgICAqL1xuICAgIHN0YXRpYyBjbG9zZShkZWxheSA9IFJFTU9WRV9PRkZfQ0FOVkFTX0RFTEFZKSB7XG4gICAgICAgIE9mZkNhbnZhc0luc3RhbmNlLmNsb3NlKGRlbGF5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYW55IE9mZkNhbnZhcyBleGlzdHMgb3Igbm90XG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgc3RhdGljIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIE9mZkNhbnZhc0luc3RhbmNlLmV4aXN0cygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHJldHVybnMgYWxsIGV4aXN0aW5nIG9mZmNhbnZhcyBlbGVtZW50c1xuICAgICAqXG4gICAgICogQHJldHVybnMge05vZGVMaXN0T2Y8RWxlbWVudD59XG4gICAgICovXG4gICAgc3RhdGljIGdldE9mZkNhbnZhcygpIHtcbiAgICAgICAgcmV0dXJuIE9mZkNhbnZhc0luc3RhbmNlLmdldE9mZkNhbnZhcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZSBjb25zdGFudFxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3RhdGljIFJFTU9WRV9PRkZfQ0FOVkFTX0RFTEFZKCkge1xuICAgICAgICByZXR1cm4gUkVNT1ZFX09GRl9DQU5WQVNfREVMQVk7XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7Ozs7O0FBVUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBOzs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBRUE7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7OztBQUlBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBRUE7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBOzs7OztBQUlBOzs7Ozs7QUFJQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFFQTs7Ozs7Ozs7OztBQVVBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7QUFNQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7O0FBSUE7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7QUFJQTtBQUNBO0FBQ0E7Ozs7OzsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///bK22\n");

/***/ }),

/***/ "csG+":
/*!**************************************************************************************************************!*\
  !*** /app/custom/plugins/WbmTagManagerEcomm/src/Resources/app/storefront/src/service/http-client.service.js ***!
  \**************************************************************************************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var src_service_http_client_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/service/http-client.service */ \"k8s9\");\n/* harmony import */ var src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/helper/dom-access.helper */ \"gHbT\");\n/* harmony import */ var _plugin_datalayer_plugin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../plugin/datalayer.plugin */ \"ffMp\");\n\n\n\nvar __superFunc = src_service_http_client_service__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype._registerOnLoaded;\n\nsrc_service_http_client_service__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prototype._registerOnLoaded = function (request, callback) {\n  __superFunc.call(this, request, callback);\n\n  request.addEventListener('loadend', function () {\n    var response = request.responseText;\n    var domParser = new DOMParser();\n    var parsedResponse = domParser.parseFromString(response, 'text/html');\n    var element = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelector(parsedResponse, '#wbm-data-layer', false);\n\n    if (element && window.dataLayer) {\n      var dataLayers = JSON.parse(element.innerHTML);\n\n      for (var key in dataLayers) {\n        if (!dataLayers.hasOwnProperty(key)) {\n          continue;\n        }\n\n        var dataLayer = JSON.parse(dataLayers[key]);\n        _plugin_datalayer_plugin__WEBPACK_IMPORTED_MODULE_2__[\"default\"].push(dataLayer); //window.dataLayer.push();\n      }\n    }\n  });\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3NHKy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vYXBwL2N1c3RvbS9wbHVnaW5zL1dibVRhZ01hbmFnZXJFY29tbS9zcmMvUmVzb3VyY2VzL2FwcC9zdG9yZWZyb250L3NyYy9zZXJ2aWNlL2h0dHAtY2xpZW50LnNlcnZpY2UuanM/NWQ2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSHR0cENsaWVudCBmcm9tICdzcmMvc2VydmljZS9odHRwLWNsaWVudC5zZXJ2aWNlJztcbmltcG9ydCBEb21BY2Nlc3MgZnJvbSAnc3JjL2hlbHBlci9kb20tYWNjZXNzLmhlbHBlcic7XG5pbXBvcnQgV2JtRGF0YUxheWVyIGZyb20gJy4uL3BsdWdpbi9kYXRhbGF5ZXIucGx1Z2luJztcblxuY29uc3QgX19zdXBlckZ1bmMgPSBIdHRwQ2xpZW50LnByb3RvdHlwZS5fcmVnaXN0ZXJPbkxvYWRlZDtcbkh0dHBDbGllbnQucHJvdG90eXBlLl9yZWdpc3Rlck9uTG9hZGVkID0gZnVuY3Rpb24gKHJlcXVlc3QsIGNhbGxiYWNrKSB7XG4gICAgX19zdXBlckZ1bmMuY2FsbCh0aGlzLCByZXF1ZXN0LCBjYWxsYmFjayk7XG4gICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZW5kJywgKCkgPT4ge1xuICAgICAgICB2YXIgcmVzcG9uc2UgPSByZXF1ZXN0LnJlc3BvbnNlVGV4dDtcbiAgICAgICAgdmFyIGRvbVBhcnNlciA9IG5ldyBET01QYXJzZXIoKTtcbiAgICAgICAgdmFyIHBhcnNlZFJlc3BvbnNlID0gZG9tUGFyc2VyLnBhcnNlRnJvbVN0cmluZyhyZXNwb25zZSwgJ3RleHQvaHRtbCcpO1xuICAgICAgICB2YXIgZWxlbWVudCA9IERvbUFjY2Vzcy5xdWVyeVNlbGVjdG9yKHBhcnNlZFJlc3BvbnNlLCAnI3dibS1kYXRhLWxheWVyJywgZmFsc2UpO1xuXG4gICAgICAgIGlmIChlbGVtZW50ICYmIHdpbmRvdy5kYXRhTGF5ZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFMYXllcnMgPSBKU09OLnBhcnNlKGVsZW1lbnQuaW5uZXJIVE1MKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGFMYXllcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWRhdGFMYXllcnMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZGF0YUxheWVyID0gSlNPTi5wYXJzZShkYXRhTGF5ZXJzW2tleV0pO1xuICAgICAgICAgICAgICAgIFdibURhdGFMYXllci5wdXNoKGRhdGFMYXllcik7XG5cbiAgICAgICAgICAgICAgICAvL3dpbmRvdy5kYXRhTGF5ZXIucHVzaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///csG+\n");

/***/ }),

/***/ "ffMp":
/*!**********************************************************************************************************!*\
  !*** /app/custom/plugins/WbmTagManagerEcomm/src/Resources/app/storefront/src/plugin/datalayer.plugin.js ***!
  \**********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return WbmDataLayer; });\n/* harmony import */ var src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/plugin-system/plugin.class */ \"FGIj\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\nvar WbmDataLayer =\n/*#__PURE__*/\nfunction (_Plugin) {\n  _inherits(WbmDataLayer, _Plugin);\n\n  function WbmDataLayer() {\n    _classCallCheck(this, WbmDataLayer);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(WbmDataLayer).apply(this, arguments));\n  }\n\n  _createClass(WbmDataLayer, [{\n    key: \"init\",\n    value: function init() {// just because we need a init function\n    }\n  }], [{\n    key: \"push\",\n    value: function push(dataLayer) {\n      if (!dataLayer.hasOwnProperty('ecommerce') && !dataLayer.ecommerce.hasOwnProperty('impressions')) {\n        window.dataLayer.push(dataLayer);\n        return;\n      }\n\n      var size = new TextEncoder().encode(JSON.stringify(dataLayer)).length / 1024;\n\n      if (Math.floor(size) < 5) {\n        window.dataLayer.push(dataLayer);\n        return;\n      }\n\n      console.log('have some impressions to split');\n      var impressions = dataLayer.ecommerce.impressions;\n      var ecommerce = dataLayer.ecommerce;\n      var subset = 1;\n      var newDataLayer = WbmDataLayer.createEmptyDataLayer(ecommerce, subset);\n      var splittedImpressions = [];\n\n      for (var i = 1; i < impressions.length; i++) {\n        splittedImpressions.push(impressions[i - 1]);\n\n        if (i % 8 === 0) {\n          WbmDataLayer.pushSubset(newDataLayer, splittedImpressions);\n          subset++;\n          newDataLayer = WbmDataLayer.createEmptyDataLayer(ecommerce, subset);\n          splittedImpressions = [];\n        }\n      } // push leftovers\n\n\n      WbmDataLayer.pushSubset(newDataLayer, splittedImpressions);\n    }\n  }, {\n    key: \"pushSubset\",\n    value: function pushSubset(dataLayer, splittedImpressions) {\n      console.log(dataLayer, splittedImpressions);\n      dataLayer.ecommerce.impressions = splittedImpressions;\n      window.dataLayer.push(dataLayer);\n    }\n  }, {\n    key: \"createEmptyDataLayer\",\n    value: function createEmptyDataLayer(ecommerce, subset) {\n      var dataLayer = {};\n      dataLayer.event = 'impressions';\n      dataLayer.ecommerce = ecommerce;\n      dataLayer.ecommerce.subset = subset;\n      dataLayer.ecommerce.impressions = [];\n      return dataLayer;\n    }\n  }]);\n\n  return WbmDataLayer;\n}(src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmZNcC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vYXBwL2N1c3RvbS9wbHVnaW5zL1dibVRhZ01hbmFnZXJFY29tbS9zcmMvUmVzb3VyY2VzL2FwcC9zdG9yZWZyb250L3NyYy9wbHVnaW4vZGF0YWxheWVyLnBsdWdpbi5qcz8yZGJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQbHVnaW4gZnJvbSAnc3JjL3BsdWdpbi1zeXN0ZW0vcGx1Z2luLmNsYXNzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2JtRGF0YUxheWVyIGV4dGVuZHMgUGx1Z2luIHtcblxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIGp1c3QgYmVjYXVzZSB3ZSBuZWVkIGEgaW5pdCBmdW5jdGlvblxuICAgIH1cblxuICAgIHN0YXRpYyBwdXNoKGRhdGFMYXllcikge1xuICAgICAgICBpZiAoIWRhdGFMYXllci5oYXNPd25Qcm9wZXJ0eSgnZWNvbW1lcmNlJykgJiYgIWRhdGFMYXllci5lY29tbWVyY2UuaGFzT3duUHJvcGVydHkoJ2ltcHJlc3Npb25zJykpIHtcbiAgICAgICAgICAgIHdpbmRvdy5kYXRhTGF5ZXIucHVzaChkYXRhTGF5ZXIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2l6ZSA9IChuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoSlNPTi5zdHJpbmdpZnkoZGF0YUxheWVyKSkubGVuZ3RoKSAvIDEwMjQ7XG5cbiAgICAgICAgaWYgKE1hdGguZmxvb3Ioc2l6ZSkgPCA1KSB7XG4gICAgICAgICAgICB3aW5kb3cuZGF0YUxheWVyLnB1c2goZGF0YUxheWVyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdoYXZlIHNvbWUgaW1wcmVzc2lvbnMgdG8gc3BsaXQnKTtcblxuICAgICAgICB2YXIgaW1wcmVzc2lvbnMgPSBkYXRhTGF5ZXIuZWNvbW1lcmNlLmltcHJlc3Npb25zO1xuICAgICAgICB2YXIgZWNvbW1lcmNlID0gZGF0YUxheWVyLmVjb21tZXJjZTtcbiAgICAgICAgdmFyIHN1YnNldCA9IDE7XG4gICAgICAgIHZhciBuZXdEYXRhTGF5ZXIgPSBXYm1EYXRhTGF5ZXIuY3JlYXRlRW1wdHlEYXRhTGF5ZXIoZWNvbW1lcmNlLCBzdWJzZXQpO1xuXG4gICAgICAgIHZhciBzcGxpdHRlZEltcHJlc3Npb25zID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgaW1wcmVzc2lvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHNwbGl0dGVkSW1wcmVzc2lvbnMucHVzaChpbXByZXNzaW9uc1tpLTFdKTtcblxuICAgICAgICAgICAgaWYgKGkgJSA4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgV2JtRGF0YUxheWVyLnB1c2hTdWJzZXQobmV3RGF0YUxheWVyLCBzcGxpdHRlZEltcHJlc3Npb25zKTtcbiAgICAgICAgICAgICAgICBzdWJzZXQrKztcbiAgICAgICAgICAgICAgICBuZXdEYXRhTGF5ZXIgPSBXYm1EYXRhTGF5ZXIuY3JlYXRlRW1wdHlEYXRhTGF5ZXIoZWNvbW1lcmNlLCBzdWJzZXQpO1xuICAgICAgICAgICAgICAgIHNwbGl0dGVkSW1wcmVzc2lvbnMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBwdXNoIGxlZnRvdmVyc1xuICAgICAgICBXYm1EYXRhTGF5ZXIucHVzaFN1YnNldChuZXdEYXRhTGF5ZXIsIHNwbGl0dGVkSW1wcmVzc2lvbnMpO1xuICAgIH1cblxuICAgIHN0YXRpYyBwdXNoU3Vic2V0KGRhdGFMYXllciwgc3BsaXR0ZWRJbXByZXNzaW9ucykge1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhTGF5ZXIsIHNwbGl0dGVkSW1wcmVzc2lvbnMpO1xuICAgICAgICBkYXRhTGF5ZXIuZWNvbW1lcmNlLmltcHJlc3Npb25zID0gc3BsaXR0ZWRJbXByZXNzaW9ucztcbiAgICAgICAgd2luZG93LmRhdGFMYXllci5wdXNoKGRhdGFMYXllcik7XG4gICAgfVxuXG4gICAgc3RhdGljIGNyZWF0ZUVtcHR5RGF0YUxheWVyKGVjb21tZXJjZSwgc3Vic2V0KSB7XG4gICAgICAgIHZhciBkYXRhTGF5ZXIgPSB7fTtcbiAgICAgICAgZGF0YUxheWVyLmV2ZW50ID0gJ2ltcHJlc3Npb25zJztcbiAgICAgICAgZGF0YUxheWVyLmVjb21tZXJjZSA9IGVjb21tZXJjZTtcbiAgICAgICAgZGF0YUxheWVyLmVjb21tZXJjZS5zdWJzZXQgPSBzdWJzZXQ7XG4gICAgICAgIGRhdGFMYXllci5lY29tbWVyY2UuaW1wcmVzc2lvbnMgPSBbXTtcblxuICAgICAgICByZXR1cm4gZGF0YUxheWVyXG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7QUFFQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7OztBQXZEQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///ffMp\n");

/***/ }),

/***/ "lpb5":
/*!***************************************************!*\
  !*** ./plugin/offcanvas/ajax-offcanvas.plugin.js ***!
  \***************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return AjaxOffCanvas; });\n/* harmony import */ var src_plugin_offcanvas_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/plugin/offcanvas/offcanvas.plugin */ \"bK22\");\n/* harmony import */ var src_service_http_client_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/service/http-client.service */ \"k8s9\");\n/* harmony import */ var src_utility_loading_indicator_loading_indicator_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/utility/loading-indicator/loading-indicator.util */ \"5lm9\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n // xhr call storage\n\nvar xhr = null;\n\nvar AjaxOffCanvas =\n/*#__PURE__*/\nfunction (_OffCanvas) {\n  _inherits(AjaxOffCanvas, _OffCanvas);\n\n  function AjaxOffCanvas() {\n    _classCallCheck(this, AjaxOffCanvas);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(AjaxOffCanvas).apply(this, arguments));\n  }\n\n  _createClass(AjaxOffCanvas, null, [{\n    key: \"open\",\n\n    /**\n     * Fire AJAX request to get the offcanvas content\n     *\n     * @param {string} url\n     * @param {*|boolean} data\n     * @param {function|null} callback\n     * @param {'left'|'right'} position\n     * @param {boolean} closable\n     * @param {number} delay\n     * @param {boolean} fullwidth\n     * @param {array|string} cssClass\n     */\n    value: function open() {\n      var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      var callback = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n      var position = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'left';\n      var closable = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : true;\n      var delay = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : src_plugin_offcanvas_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_0__[\"default\"].REMOVE_OFF_CANVAS_DELAY();\n      var fullwidth = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n      var cssClass = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : '';\n\n      if (!url) {\n        throw new Error('A url must be given!');\n      } // avoid multiple backdrops\n\n\n      src_plugin_offcanvas_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_0__[\"OffCanvasInstance\"]._removeExistingOffCanvas();\n\n      var offCanvas = src_plugin_offcanvas_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_0__[\"OffCanvasInstance\"]._createOffCanvas(position, fullwidth, cssClass);\n\n      this.setContent(url, data, callback, closable, delay);\n\n      src_plugin_offcanvas_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_0__[\"OffCanvasInstance\"]._openOffcanvas(offCanvas);\n    }\n    /**\n     * Method to change the content of the already visible OffCanvas via xhr\n     *\n     * @param {string} url\n     * @param {*} data\n     * @param {function} callback\n     * @param {boolean} closable\n     * @param {number} delay\n     */\n\n  }, {\n    key: \"setContent\",\n    value: function setContent(url, data, callback, closable, delay) {\n      var _this = this;\n\n      var client = new src_service_http_client_service__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();\n\n      _get(_getPrototypeOf(AjaxOffCanvas), \"setContent\", this).call(this, \"<div class=\\\"offcanvas-content-container\\\">\".concat(src_utility_loading_indicator_loading_indicator_util__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getTemplate(), \"</div>\"), closable, delay); // interrupt already running ajax calls\n\n\n      if (xhr) xhr.abort();\n\n      var cb = function cb(response) {\n        _get(_getPrototypeOf(AjaxOffCanvas), \"setContent\", _this).call(_this, response, closable, delay); // if a callback function is being injected execute it after opening the OffCanvas\n\n\n        if (typeof callback === 'function') {\n          callback(response);\n        }\n      };\n\n      if (data) {\n        xhr = client.post(url, data, AjaxOffCanvas.executeCallback.bind(this, cb));\n      } else {\n        xhr = client.get(url, AjaxOffCanvas.executeCallback.bind(this, cb));\n      }\n    }\n    /**\n     * Executes the given callback\n     * and initializes all plugins\n     *\n     * @param {function} cb\n     * @param {string} response\n     */\n\n  }, {\n    key: \"executeCallback\",\n    value: function executeCallback(cb, response) {\n      if (typeof cb === 'function') {\n        cb(response);\n      }\n\n      window.PluginManager.initializePlugins();\n    }\n  }]);\n\n  return AjaxOffCanvas;\n}(src_plugin_offcanvas_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibHBiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BsdWdpbi9vZmZjYW52YXMvYWpheC1vZmZjYW52YXMucGx1Z2luLmpzPzk2OTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9mZkNhbnZhcywgeyBPZmZDYW52YXNJbnN0YW5jZSB9IGZyb20gJ3NyYy9wbHVnaW4vb2ZmY2FudmFzL29mZmNhbnZhcy5wbHVnaW4nO1xuaW1wb3J0IEh0dHBDbGllbnQgZnJvbSAnc3JjL3NlcnZpY2UvaHR0cC1jbGllbnQuc2VydmljZSc7XG5pbXBvcnQgTG9hZGluZ0luZGljYXRvciBmcm9tICdzcmMvdXRpbGl0eS9sb2FkaW5nLWluZGljYXRvci9sb2FkaW5nLWluZGljYXRvci51dGlsJztcblxuLy8geGhyIGNhbGwgc3RvcmFnZVxubGV0IHhociA9IG51bGw7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFqYXhPZmZDYW52YXMgZXh0ZW5kcyBPZmZDYW52YXMge1xuXG4gICAgLyoqXG4gICAgICogRmlyZSBBSkFYIHJlcXVlc3QgdG8gZ2V0IHRoZSBvZmZjYW52YXMgY29udGVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgICAqIEBwYXJhbSB7Knxib29sZWFufSBkYXRhXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbnxudWxsfSBjYWxsYmFja1xuICAgICAqIEBwYXJhbSB7J2xlZnQnfCdyaWdodCd9IHBvc2l0aW9uXG4gICAgICogQHBhcmFtIHtib29sZWFufSBjbG9zYWJsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZnVsbHdpZHRoXG4gICAgICogQHBhcmFtIHthcnJheXxzdHJpbmd9IGNzc0NsYXNzXG4gICAgICovXG4gICAgc3RhdGljIG9wZW4odXJsID0gZmFsc2UsIGRhdGEgPSBmYWxzZSwgY2FsbGJhY2sgPSBudWxsLCBwb3NpdGlvbiA9ICdsZWZ0JywgY2xvc2FibGUgPSB0cnVlLCBkZWxheSA9IE9mZkNhbnZhcy5SRU1PVkVfT0ZGX0NBTlZBU19ERUxBWSgpLCBmdWxsd2lkdGggPSBmYWxzZSwgY3NzQ2xhc3MgPSAnJykge1xuICAgICAgICBpZiAoIXVybCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBIHVybCBtdXN0IGJlIGdpdmVuIScpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGF2b2lkIG11bHRpcGxlIGJhY2tkcm9wc1xuICAgICAgICBPZmZDYW52YXNJbnN0YW5jZS5fcmVtb3ZlRXhpc3RpbmdPZmZDYW52YXMoKTtcblxuICAgICAgICBjb25zdCBvZmZDYW52YXMgPSBPZmZDYW52YXNJbnN0YW5jZS5fY3JlYXRlT2ZmQ2FudmFzKHBvc2l0aW9uLCBmdWxsd2lkdGgsIGNzc0NsYXNzKTtcbiAgICAgICAgdGhpcy5zZXRDb250ZW50KHVybCwgZGF0YSwgY2FsbGJhY2ssIGNsb3NhYmxlLCBkZWxheSk7XG4gICAgICAgIE9mZkNhbnZhc0luc3RhbmNlLl9vcGVuT2ZmY2FudmFzKG9mZkNhbnZhcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRvIGNoYW5nZSB0aGUgY29udGVudCBvZiB0aGUgYWxyZWFkeSB2aXNpYmxlIE9mZkNhbnZhcyB2aWEgeGhyXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gICAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNsb3NhYmxlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRlbGF5XG4gICAgICovXG4gICAgc3RhdGljIHNldENvbnRlbnQodXJsLCBkYXRhLCBjYWxsYmFjaywgY2xvc2FibGUsIGRlbGF5KSB7XG4gICAgICAgIGNvbnN0IGNsaWVudCA9IG5ldyBIdHRwQ2xpZW50KCk7XG4gICAgICAgIHN1cGVyLnNldENvbnRlbnQoYDxkaXYgY2xhc3M9XCJvZmZjYW52YXMtY29udGVudC1jb250YWluZXJcIj4ke0xvYWRpbmdJbmRpY2F0b3IuZ2V0VGVtcGxhdGUoKX08L2Rpdj5gLCBjbG9zYWJsZSwgZGVsYXkpO1xuXG4gICAgICAgIC8vIGludGVycnVwdCBhbHJlYWR5IHJ1bm5pbmcgYWpheCBjYWxsc1xuICAgICAgICBpZiAoeGhyKSB4aHIuYWJvcnQoKTtcblxuICAgICAgICBjb25zdCBjYiA9IChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgICAgc3VwZXIuc2V0Q29udGVudChyZXNwb25zZSwgY2xvc2FibGUsIGRlbGF5KTtcbiAgICAgICAgICAgIC8vIGlmIGEgY2FsbGJhY2sgZnVuY3Rpb24gaXMgYmVpbmcgaW5qZWN0ZWQgZXhlY3V0ZSBpdCBhZnRlciBvcGVuaW5nIHRoZSBPZmZDYW52YXNcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHhociA9IGNsaWVudC5wb3N0KHVybCwgZGF0YSwgQWpheE9mZkNhbnZhcy5leGVjdXRlQ2FsbGJhY2suYmluZCh0aGlzLGNiKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB4aHIgPSBjbGllbnQuZ2V0KHVybCwgQWpheE9mZkNhbnZhcy5leGVjdXRlQ2FsbGJhY2suYmluZCh0aGlzLGNiKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gY2FsbGJhY2tcbiAgICAgKiBhbmQgaW5pdGlhbGl6ZXMgYWxsIHBsdWdpbnNcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHJlc3BvbnNlXG4gICAgICovXG4gICAgc3RhdGljIGV4ZWN1dGVDYWxsYmFjayhjYiwgcmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjYiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2IocmVzcG9uc2UpO1xuICAgICAgICB9XG4gICAgICAgIHdpbmRvdy5QbHVnaW5NYW5hZ2VyLmluaXRpYWxpemVQbHVnaW5zKCk7XG4gICAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUFFQTs7Ozs7Ozs7Ozs7O0FBWUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7QUFTQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7Ozs7QUFyRUE7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///lpb5\n");

/***/ }),

/***/ "t8WJ":
/*!******************************************************!*\
  !*** ./plugin/cookie/cookie-configuration.plugin.js ***!
  \******************************************************/
/*! exports provided: COOKIE_CONFIGURATION_UPDATE, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"COOKIE_CONFIGURATION_UPDATE\", function() { return COOKIE_CONFIGURATION_UPDATE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CookieConfiguration; });\n/* harmony import */ var src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/plugin-system/plugin.class */ \"FGIj\");\n/* harmony import */ var src_helper_storage_cookie_storage_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/helper/storage/cookie-storage.helper */ \"prSB\");\n/* harmony import */ var src_plugin_offcanvas_ajax_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! src/plugin/offcanvas/ajax-offcanvas.plugin */ \"lpb5\");\n/* harmony import */ var src_plugin_offcanvas_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! src/plugin/offcanvas/offcanvas.plugin */ \"bK22\");\n/* harmony import */ var src_utility_modal_extension_ajax_modal_extension_util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! src/utility/modal-extension/ajax-modal-extension.util */ \"DeZd\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n *\n * CookieConfiguration plugin\n * --------------------------\n * Renders the configuration template inside an offCanvas\n *\n * Applies its \"openOffCanvas\"-eventHandler to the following selector:\n * 1) '.js-cookie-configuration-button button'\n * 2) `[href=\"${window.router['frontend.cookie.offcanvas']}\"]`\n *\n * Can be opened manually using the public method \"openOffCanvas\"\n *\n * The cookie form is defined via CookieController.php\n * Cookies marked as \"required\" (see CookieController.php) are ignored, since they are assumed to be set manually\n *\n * Configuration changes are pushed to the global (document) event \"CookieConfiguration_Update\"\n *\n */\n\n/* global PluginManager */\n\n\n\n\n // this event will be published via a global (document) EventEmitter\n\nvar COOKIE_CONFIGURATION_UPDATE = 'CookieConfiguration_Update';\n\nvar CookieConfiguration =\n/*#__PURE__*/\nfunction (_Plugin) {\n  _inherits(CookieConfiguration, _Plugin);\n\n  function CookieConfiguration() {\n    _classCallCheck(this, CookieConfiguration);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(CookieConfiguration).apply(this, arguments));\n  }\n\n  _createClass(CookieConfiguration, [{\n    key: \"init\",\n    value: function init() {\n      this.lastState = {\n        active: [],\n        inactive: []\n      };\n      this.ajaxModalExtension = null;\n\n      this._registerEvents();\n    }\n    /**\n     * Registers the events for displaying the offCanvas\n     * Applies the event to all elements using the \"buttonOpenSelector\" or \"customLinkSelector\"\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_registerEvents\",\n    value: function _registerEvents() {\n      var _this = this;\n\n      var _this$options = this.options,\n          submitEvent = _this$options.submitEvent,\n          buttonOpenSelector = _this$options.buttonOpenSelector,\n          customLinkSelector = _this$options.customLinkSelector,\n          globalButtonAcceptAllSelector = _this$options.globalButtonAcceptAllSelector;\n      Array.from(document.querySelectorAll(buttonOpenSelector)).forEach(function (button) {\n        button.addEventListener(submitEvent, _this.openOffCanvas.bind(_this));\n      });\n      Array.from(document.querySelectorAll(customLinkSelector)).forEach(function (customLink) {\n        customLink.addEventListener(submitEvent, _this._handleCustomLink.bind(_this));\n      });\n      Array.from(document.querySelectorAll(globalButtonAcceptAllSelector)).forEach(function (customLink) {\n        customLink.addEventListener(submitEvent, _this.acceptAllCookies.bind(_this));\n      });\n    }\n    /**\n     * Registers events required by the offCanvas template\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_registerOffCanvasEvents\",\n    value: function _registerOffCanvasEvents() {\n      var _this2 = this;\n\n      var _this$options2 = this.options,\n          submitEvent = _this$options2.submitEvent,\n          buttonSubmitSelector = _this$options2.buttonSubmitSelector,\n          buttonAcceptAllSelector = _this$options2.buttonAcceptAllSelector,\n          wrapperToggleSelector = _this$options2.wrapperToggleSelector;\n\n      var offCanvas = this._getOffCanvas();\n\n      if (offCanvas) {\n        var button = offCanvas.querySelector(buttonSubmitSelector);\n        var buttonAcceptAll = offCanvas.querySelector(buttonAcceptAllSelector);\n        var checkboxes = Array.from(offCanvas.querySelectorAll('input[type=\"checkbox\"]'));\n        var wrapperTrigger = Array.from(offCanvas.querySelectorAll(wrapperToggleSelector));\n\n        if (button) {\n          button.addEventListener(submitEvent, this._handleSubmit.bind(this, src_helper_storage_cookie_storage_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n        }\n\n        if (buttonAcceptAll) {\n          buttonAcceptAll.addEventListener(submitEvent, this._handleAcceptAll.bind(this, src_helper_storage_cookie_storage_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"]));\n        }\n\n        checkboxes.forEach(function (checkbox) {\n          checkbox.addEventListener(submitEvent, _this2._handleCheckbox.bind(_this2));\n        });\n        wrapperTrigger.forEach(function (trigger) {\n          trigger.addEventListener(submitEvent, _this2._handleWrapperTrigger.bind(_this2));\n        });\n      }\n    }\n    /**\n     * Prevent the event default e.g. for anchor elements using the href-selector\n     *\n     * @param event\n     * @private\n     */\n\n  }, {\n    key: \"_handleCustomLink\",\n    value: function _handleCustomLink(event) {\n      event.preventDefault();\n      this.openOffCanvas();\n    }\n  }, {\n    key: \"_handleUpdateListener\",\n    value: function _handleUpdateListener(active, inactive) {\n      var updatedCookies = this._getUpdatedCookies(active, inactive);\n\n      document.$emitter.publish(COOKIE_CONFIGURATION_UPDATE, updatedCookies);\n    }\n    /**\n     * Compare the current in-/active cookies to the initialState and return updated cookies only\n     *\n     * @param active\n     * @param inactive\n     * @private\n     */\n\n  }, {\n    key: \"_getUpdatedCookies\",\n    value: function _getUpdatedCookies(active, inactive) {\n      var lastState = this.lastState;\n      var updated = {};\n      active.forEach(function (currentCheckbox) {\n        if (lastState.inactive.includes(currentCheckbox)) {\n          updated[currentCheckbox] = true;\n        }\n      });\n      inactive.forEach(function (currentCheckbox) {\n        if (lastState.active.includes(currentCheckbox)) {\n          updated[currentCheckbox] = false;\n        }\n      });\n      return updated;\n    }\n    /**\n     * Public method to open the offCanvas\n     *\n     * @param {function|null} callback\n     */\n\n  }, {\n    key: \"openOffCanvas\",\n    value: function openOffCanvas(callback) {\n      var offCanvasPosition = this.options.offCanvasPosition;\n      var url = window.router['frontend.cookie.offcanvas'];\n\n      this._hideCookieBar();\n\n      src_plugin_offcanvas_ajax_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_2__[\"default\"].open(url, false, this._onOffCanvasOpened.bind(this, callback), offCanvasPosition);\n    }\n    /**\n     * Public method to close the offCanvas\n     *\n     * @param callback\n     */\n\n  }, {\n    key: \"closeOffCanvas\",\n    value: function closeOffCanvas(callback) {\n      src_plugin_offcanvas_ajax_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_2__[\"default\"].close();\n      this.ajaxModalExtension = null;\n\n      if (typeof callback === 'function') {\n        callback();\n      }\n    }\n    /**\n     * Private method to apply events to the cookie-configuration template\n     * Also sets the initial checkbox state based on currently set cookies\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_onOffCanvasOpened\",\n    value: function _onOffCanvasOpened(callback) {\n      this._registerOffCanvasEvents();\n\n      this.ajaxModalExtension = new src_utility_modal_extension_ajax_modal_extension_util__WEBPACK_IMPORTED_MODULE_4__[\"default\"](false);\n\n      this._setInitialState();\n\n      if (typeof callback === 'function') {\n        callback();\n      }\n    }\n  }, {\n    key: \"_hideCookieBar\",\n    value: function _hideCookieBar() {\n      var cookiePermissionPlugin = PluginManager.getPluginInstances('CookiePermission');\n\n      if (cookiePermissionPlugin && cookiePermissionPlugin[0]) {\n        cookiePermissionPlugin[0]._hideCookieBar();\n\n        cookiePermissionPlugin[0]._removeBodyPadding();\n      }\n    }\n    /**\n     * Get current cookie configuration and preselect coherent checkboxes\n     * Required cookies are already checked in the template\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_setInitialState\",\n    value: function _setInitialState() {\n      var _this3 = this;\n\n      var offCanvas = this._getOffCanvas();\n\n      var cookies = this._getCookies('all');\n\n      var activeCookies = [];\n      var inactiveCookies = [];\n      cookies.forEach(function (_ref) {\n        var cookie = _ref.cookie,\n            required = _ref.required;\n        var isActive = src_helper_storage_cookie_storage_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getItem(cookie);\n\n        if (isActive || required) {\n          activeCookies.push(cookie);\n        } else {\n          inactiveCookies.push(cookie);\n        }\n      });\n      this.lastState = {\n        active: activeCookies,\n        inactive: inactiveCookies\n      };\n      activeCookies.forEach(function (activeCookie) {\n        var target = offCanvas.querySelector(\"[data-cookie=\\\"\".concat(activeCookie, \"\\\"]\"));\n        target.checked = true;\n\n        _this3._childCheckboxEvent(target);\n      });\n    }\n    /**\n     * From click target, try to find the cookie group container and toggle the open state\n     *\n     * @param event\n     * @private\n     */\n\n  }, {\n    key: \"_handleWrapperTrigger\",\n    value: function _handleWrapperTrigger(event) {\n      event.preventDefault();\n      var _this$options3 = this.options,\n          entriesActiveClass = _this$options3.entriesActiveClass,\n          entriesClass = _this$options3.entriesClass,\n          groupClass = _this$options3.groupClass;\n      var target = event.target;\n\n      var cookieEntryContainer = this._findParentEl(target, entriesClass, groupClass);\n\n      if (cookieEntryContainer) {\n        var active = cookieEntryContainer.classList.contains(entriesActiveClass);\n\n        if (active) {\n          cookieEntryContainer.classList.remove(entriesActiveClass);\n        } else {\n          cookieEntryContainer.classList.add(entriesActiveClass);\n        }\n      }\n    }\n    /**\n     * Determine whether the target checkbox is a parent or a child checkbox\n     *\n     * @param event\n     * @private\n     */\n\n  }, {\n    key: \"_handleCheckbox\",\n    value: function _handleCheckbox(event) {\n      var parentInputClass = this.options.parentInputClass;\n      var target = event.target;\n      var callback = target.classList.contains(parentInputClass) ? this._parentCheckboxEvent : this._childCheckboxEvent;\n      callback.call(this, target);\n    }\n    /**\n     * Recursively checks the provided elements parent for the first class parameter\n     * Stops the recursion, if the parentElement contains the second class parameter\n     *\n     * @param el\n     * @param findClass\n     * @param abortClass\n     * @returns {*|HTMLElement|*}\n     * @private\n     */\n\n  }, {\n    key: \"_findParentEl\",\n    value: function _findParentEl(el, findClass) {\n      var abortClass = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      while (!!el && !el.classList.contains(abortClass)) {\n        if (el.classList.contains(findClass)) {\n          return el;\n        }\n\n        el = el.parentElement;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"_isChecked\",\n    value: function _isChecked(target) {\n      return !!target.checked;\n    }\n    /**\n     * De-/select all checkboxes of the current group\n     *\n     * @param target\n     * @private\n     */\n\n  }, {\n    key: \"_parentCheckboxEvent\",\n    value: function _parentCheckboxEvent(target) {\n      var groupClass = this.options.groupClass;\n\n      var newState = this._isChecked(target);\n\n      var group = this._findParentEl(target, groupClass);\n\n      this._toggleWholeGroup(newState, group);\n    }\n    /**\n     *\n     * Trigger a change event for the \"select-all\" checkbox of the childs group\n     *\n     * @param target\n     * @private\n     */\n\n  }, {\n    key: \"_childCheckboxEvent\",\n    value: function _childCheckboxEvent(target) {\n      var groupClass = this.options.groupClass;\n\n      var newState = this._isChecked(target);\n\n      var group = this._findParentEl(target, groupClass);\n\n      this._toggleParentCheckbox(newState, group);\n    }\n    /**\n     * Toogle each checkbox inside the given group\n     *\n     * @param state\n     * @param group\n     * @private\n     */\n\n  }, {\n    key: \"_toggleWholeGroup\",\n    value: function _toggleWholeGroup(state, group) {\n      Array.from(group.querySelectorAll('input')).forEach(function (checkbox) {\n        checkbox.checked = state;\n      });\n    }\n    /**\n     * Toggle a groups \"select-all\" checkbox according to changes to its child checkboxes\n     * \"Check, if any child checkbox is checked\" / \"Uncheck, if no child checkboxes are checked\"\n     *\n     * @param state\n     * @param group\n     * @private\n     */\n\n  }, {\n    key: \"_toggleParentCheckbox\",\n    value: function _toggleParentCheckbox(state, group) {\n      var parentInputSelector = this.options.parentInputSelector;\n      var checkboxes = Array.from(group.querySelectorAll(\"input:not(\".concat(parentInputSelector, \")\")));\n      var activeCheckboxes = Array.from(group.querySelectorAll(\"input:not(\".concat(parentInputSelector, \"):checked\")));\n\n      if (checkboxes.length > 0) {\n        var parentCheckbox = group.querySelector(parentInputSelector);\n\n        if (parentCheckbox) {\n          var checked = activeCheckboxes.length > 0;\n          var indeterminate = checked && activeCheckboxes.length !== checkboxes.length;\n          parentCheckbox.checked = checked;\n          parentCheckbox.indeterminate = indeterminate;\n        }\n      }\n    }\n    /**\n     * Event handler for the 'Save' button inside the offCanvas\n     *\n     * Removes unselected cookies, if already set\n     * Sets or refreshes selected cookies\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_handleSubmit\",\n    value: function _handleSubmit() {\n      var activeCookies = this._getCookies('active');\n\n      var inactiveCookies = this._getCookies('inactive');\n\n      var cookiePreference = this.options.cookiePreference;\n      var activeCookieNames = [];\n      var inactiveCookieNames = [];\n      inactiveCookies.forEach(function (_ref2) {\n        var cookie = _ref2.cookie;\n        inactiveCookieNames.push(cookie);\n\n        if (src_helper_storage_cookie_storage_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getItem(cookie)) {\n          src_helper_storage_cookie_storage_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].removeItem(cookie);\n        }\n      });\n      /**\n       * Cookies without value are passed to the updateListener\n       * ( see \"_handleUpdateListener\" method )\n       */\n\n      activeCookies.forEach(function (_ref3) {\n        var cookie = _ref3.cookie,\n            value = _ref3.value,\n            expiration = _ref3.expiration;\n        activeCookieNames.push(cookie);\n\n        if (cookie && value) {\n          src_helper_storage_cookie_storage_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setItem(cookie, value, expiration);\n        }\n      });\n      src_helper_storage_cookie_storage_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setItem(cookiePreference, '1', '30');\n\n      this._handleUpdateListener(activeCookieNames, inactiveCookieNames);\n\n      this.closeOffCanvas();\n    }\n  }, {\n    key: \"acceptAllCookies\",\n    value: function acceptAllCookies() {\n      var _this4 = this;\n\n      this.openOffCanvas(function () {\n        _this4._handleAcceptAll();\n      });\n    }\n    /**\n     * Event handler for the 'Allow all'-button in the off canvas view.\n     *\n     * This will set and refresh all registered cookies.\n     *\n     * @private\n     */\n\n  }, {\n    key: \"_handleAcceptAll\",\n    value: function _handleAcceptAll() {\n      var allCookies = this._getCookies('all');\n\n      var cookiePreference = this.options.cookiePreference;\n      allCookies.forEach(function (_ref4) {\n        var cookie = _ref4.cookie,\n            value = _ref4.value,\n            expiration = _ref4.expiration;\n\n        if (cookie && value) {\n          src_helper_storage_cookie_storage_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setItem(cookie, value, expiration);\n        }\n      });\n      src_helper_storage_cookie_storage_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].setItem(cookiePreference, '1', '30');\n\n      this._handleUpdateListener(allCookies.map(function (_ref5) {\n        var cookie = _ref5.cookie;\n        return cookie;\n      }), []);\n\n      this.closeOffCanvas();\n    }\n    /**\n     * Get cookies passed to the configuration template\n     * Can be filtered by \"all\", \"active\" or \"inactive\"\n     *\n     * Always excludes \"required\" cookies, since they are assumed to be set separately.\n     *\n     * @param type\n     * @returns {Array}\n     * @private\n     */\n\n  }, {\n    key: \"_getCookies\",\n    value: function _getCookies() {\n      var _this5 = this;\n\n      var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'all';\n      var cookieSelector = this.options.cookieSelector;\n\n      var offCanvas = this._getOffCanvas();\n\n      return Array.from(offCanvas.querySelectorAll(cookieSelector)).filter(function (cookieInput) {\n        switch (type) {\n          case 'all':\n            return true;\n\n          case 'active':\n            return _this5._isChecked(cookieInput);\n\n          case 'inactive':\n            return !_this5._isChecked(cookieInput);\n\n          default:\n            return false;\n        }\n      }).map(function (filteredInput) {\n        var _filteredInput$datase = filteredInput.dataset,\n            cookie = _filteredInput$datase.cookie,\n            cookieValue = _filteredInput$datase.cookieValue,\n            cookieExpiration = _filteredInput$datase.cookieExpiration,\n            cookieRequired = _filteredInput$datase.cookieRequired;\n        return {\n          cookie: cookie,\n          value: cookieValue,\n          expiration: cookieExpiration,\n          required: cookieRequired\n        };\n      });\n    }\n    /**\n     * Returns the current offcanvas element if available\n     *\n     * @returns {*}\n     * @private\n     */\n\n  }, {\n    key: \"_getOffCanvas\",\n    value: function _getOffCanvas() {\n      var elements = src_plugin_offcanvas_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_3__[\"default\"] ? src_plugin_offcanvas_offcanvas_plugin__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getOffCanvas() : [];\n      return elements && elements.length > 0 ? elements[0] : false;\n    }\n  }]);\n\n  return CookieConfiguration;\n}(src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n_defineProperty(CookieConfiguration, \"options\", {\n  offCanvasPosition: 'left',\n  submitEvent: 'click',\n  cookiePreference: 'cookie-preference',\n  cookieSelector: '[data-cookie]',\n  buttonOpenSelector: '.js-cookie-configuration-button button',\n  buttonSubmitSelector: '.js-offcanvas-cookie-submit',\n  buttonAcceptAllSelector: '.js-offcanvas-cookie-accept-all',\n  globalButtonAcceptAllSelector: '.js-cookie-accept-all-button',\n  wrapperToggleSelector: '.offcanvas-cookie-entries span',\n  parentInputSelector: '.offcanvas-cookie-parent-input',\n  customLinkSelector: \"[href=\\\"\".concat(window.router['frontend.cookie.offcanvas'], \"\\\"]\"),\n  entriesActiveClass: 'offcanvas-cookie-entries--active',\n  entriesClass: 'offcanvas-cookie-entries',\n  groupClass: 'offcanvas-cookie-group',\n  parentInputClass: 'offcanvas-cookie-parent-input'\n});\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidDhXSi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BsdWdpbi9jb29raWUvY29va2llLWNvbmZpZ3VyYXRpb24ucGx1Z2luLmpzP2I3YzUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKlxuICogQ29va2llQ29uZmlndXJhdGlvbiBwbHVnaW5cbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBSZW5kZXJzIHRoZSBjb25maWd1cmF0aW9uIHRlbXBsYXRlIGluc2lkZSBhbiBvZmZDYW52YXNcbiAqXG4gKiBBcHBsaWVzIGl0cyBcIm9wZW5PZmZDYW52YXNcIi1ldmVudEhhbmRsZXIgdG8gdGhlIGZvbGxvd2luZyBzZWxlY3RvcjpcbiAqIDEpICcuanMtY29va2llLWNvbmZpZ3VyYXRpb24tYnV0dG9uIGJ1dHRvbidcbiAqIDIpIGBbaHJlZj1cIiR7d2luZG93LnJvdXRlclsnZnJvbnRlbmQuY29va2llLm9mZmNhbnZhcyddfVwiXWBcbiAqXG4gKiBDYW4gYmUgb3BlbmVkIG1hbnVhbGx5IHVzaW5nIHRoZSBwdWJsaWMgbWV0aG9kIFwib3Blbk9mZkNhbnZhc1wiXG4gKlxuICogVGhlIGNvb2tpZSBmb3JtIGlzIGRlZmluZWQgdmlhIENvb2tpZUNvbnRyb2xsZXIucGhwXG4gKiBDb29raWVzIG1hcmtlZCBhcyBcInJlcXVpcmVkXCIgKHNlZSBDb29raWVDb250cm9sbGVyLnBocCkgYXJlIGlnbm9yZWQsIHNpbmNlIHRoZXkgYXJlIGFzc3VtZWQgdG8gYmUgc2V0IG1hbnVhbGx5XG4gKlxuICogQ29uZmlndXJhdGlvbiBjaGFuZ2VzIGFyZSBwdXNoZWQgdG8gdGhlIGdsb2JhbCAoZG9jdW1lbnQpIGV2ZW50IFwiQ29va2llQ29uZmlndXJhdGlvbl9VcGRhdGVcIlxuICpcbiAqL1xuXG4vKiBnbG9iYWwgUGx1Z2luTWFuYWdlciAqL1xuXG5pbXBvcnQgUGx1Z2luIGZyb20gJ3NyYy9wbHVnaW4tc3lzdGVtL3BsdWdpbi5jbGFzcyc7XG5pbXBvcnQgQ29va2llU3RvcmFnZSBmcm9tICdzcmMvaGVscGVyL3N0b3JhZ2UvY29va2llLXN0b3JhZ2UuaGVscGVyJztcbmltcG9ydCBBamF4T2ZmQ2FudmFzIGZyb20gJ3NyYy9wbHVnaW4vb2ZmY2FudmFzL2FqYXgtb2ZmY2FudmFzLnBsdWdpbic7XG5pbXBvcnQgT2ZmQ2FudmFzIGZyb20gJ3NyYy9wbHVnaW4vb2ZmY2FudmFzL29mZmNhbnZhcy5wbHVnaW4nO1xuaW1wb3J0IEFqYXhNb2RhbEV4dGVuc2lvbiBmcm9tICdzcmMvdXRpbGl0eS9tb2RhbC1leHRlbnNpb24vYWpheC1tb2RhbC1leHRlbnNpb24udXRpbCc7XG5cbi8vIHRoaXMgZXZlbnQgd2lsbCBiZSBwdWJsaXNoZWQgdmlhIGEgZ2xvYmFsIChkb2N1bWVudCkgRXZlbnRFbWl0dGVyXG5leHBvcnQgY29uc3QgQ09PS0lFX0NPTkZJR1VSQVRJT05fVVBEQVRFID0gJ0Nvb2tpZUNvbmZpZ3VyYXRpb25fVXBkYXRlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29va2llQ29uZmlndXJhdGlvbiBleHRlbmRzIFBsdWdpbiB7XG5cbiAgICBzdGF0aWMgb3B0aW9ucyA9IHtcbiAgICAgICAgb2ZmQ2FudmFzUG9zaXRpb246ICdsZWZ0JyxcbiAgICAgICAgc3VibWl0RXZlbnQ6ICdjbGljaycsXG4gICAgICAgIGNvb2tpZVByZWZlcmVuY2U6ICdjb29raWUtcHJlZmVyZW5jZScsXG4gICAgICAgIGNvb2tpZVNlbGVjdG9yOiAnW2RhdGEtY29va2llXScsXG4gICAgICAgIGJ1dHRvbk9wZW5TZWxlY3RvcjogJy5qcy1jb29raWUtY29uZmlndXJhdGlvbi1idXR0b24gYnV0dG9uJyxcbiAgICAgICAgYnV0dG9uU3VibWl0U2VsZWN0b3I6ICcuanMtb2ZmY2FudmFzLWNvb2tpZS1zdWJtaXQnLFxuICAgICAgICBidXR0b25BY2NlcHRBbGxTZWxlY3RvcjogJy5qcy1vZmZjYW52YXMtY29va2llLWFjY2VwdC1hbGwnLFxuICAgICAgICBnbG9iYWxCdXR0b25BY2NlcHRBbGxTZWxlY3RvcjogJy5qcy1jb29raWUtYWNjZXB0LWFsbC1idXR0b24nLFxuICAgICAgICB3cmFwcGVyVG9nZ2xlU2VsZWN0b3I6ICcub2ZmY2FudmFzLWNvb2tpZS1lbnRyaWVzIHNwYW4nLFxuICAgICAgICBwYXJlbnRJbnB1dFNlbGVjdG9yOiAnLm9mZmNhbnZhcy1jb29raWUtcGFyZW50LWlucHV0JyxcbiAgICAgICAgY3VzdG9tTGlua1NlbGVjdG9yOiBgW2hyZWY9XCIke3dpbmRvdy5yb3V0ZXJbJ2Zyb250ZW5kLmNvb2tpZS5vZmZjYW52YXMnXX1cIl1gLFxuICAgICAgICBlbnRyaWVzQWN0aXZlQ2xhc3M6ICdvZmZjYW52YXMtY29va2llLWVudHJpZXMtLWFjdGl2ZScsXG4gICAgICAgIGVudHJpZXNDbGFzczogJ29mZmNhbnZhcy1jb29raWUtZW50cmllcycsXG4gICAgICAgIGdyb3VwQ2xhc3M6ICdvZmZjYW52YXMtY29va2llLWdyb3VwJyxcbiAgICAgICAgcGFyZW50SW5wdXRDbGFzczogJ29mZmNhbnZhcy1jb29raWUtcGFyZW50LWlucHV0J1xuICAgIH07XG5cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLmxhc3RTdGF0ZSA9IHtcbiAgICAgICAgICAgIGFjdGl2ZTogW10sXG4gICAgICAgICAgICBpbmFjdGl2ZTogW11cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmFqYXhNb2RhbEV4dGVuc2lvbiA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fcmVnaXN0ZXJFdmVudHMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgdGhlIGV2ZW50cyBmb3IgZGlzcGxheWluZyB0aGUgb2ZmQ2FudmFzXG4gICAgICogQXBwbGllcyB0aGUgZXZlbnQgdG8gYWxsIGVsZW1lbnRzIHVzaW5nIHRoZSBcImJ1dHRvbk9wZW5TZWxlY3RvclwiIG9yIFwiY3VzdG9tTGlua1NlbGVjdG9yXCJcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3JlZ2lzdGVyRXZlbnRzKCkge1xuICAgICAgICBjb25zdCB7IHN1Ym1pdEV2ZW50LCBidXR0b25PcGVuU2VsZWN0b3IsIGN1c3RvbUxpbmtTZWxlY3RvciwgZ2xvYmFsQnV0dG9uQWNjZXB0QWxsU2VsZWN0b3IgfSA9IHRoaXMub3B0aW9ucztcblxuICAgICAgICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYnV0dG9uT3BlblNlbGVjdG9yKSkuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoc3VibWl0RXZlbnQsIHRoaXMub3Blbk9mZkNhbnZhcy5iaW5kKHRoaXMpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGN1c3RvbUxpbmtTZWxlY3RvcikpLmZvckVhY2goY3VzdG9tTGluayA9PiB7XG4gICAgICAgICAgICBjdXN0b21MaW5rLmFkZEV2ZW50TGlzdGVuZXIoc3VibWl0RXZlbnQsIHRoaXMuX2hhbmRsZUN1c3RvbUxpbmsuYmluZCh0aGlzKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChnbG9iYWxCdXR0b25BY2NlcHRBbGxTZWxlY3RvcikpLmZvckVhY2goY3VzdG9tTGluayA9PiB7XG4gICAgICAgICAgICBjdXN0b21MaW5rLmFkZEV2ZW50TGlzdGVuZXIoc3VibWl0RXZlbnQsIHRoaXMuYWNjZXB0QWxsQ29va2llcy5iaW5kKHRoaXMpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGV2ZW50cyByZXF1aXJlZCBieSB0aGUgb2ZmQ2FudmFzIHRlbXBsYXRlXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9yZWdpc3Rlck9mZkNhbnZhc0V2ZW50cygpIHtcbiAgICAgICAgY29uc3QgeyBzdWJtaXRFdmVudCwgYnV0dG9uU3VibWl0U2VsZWN0b3IsIGJ1dHRvbkFjY2VwdEFsbFNlbGVjdG9yLCB3cmFwcGVyVG9nZ2xlU2VsZWN0b3IgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3Qgb2ZmQ2FudmFzID0gdGhpcy5fZ2V0T2ZmQ2FudmFzKCk7XG5cbiAgICAgICAgaWYgKG9mZkNhbnZhcykge1xuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gb2ZmQ2FudmFzLnF1ZXJ5U2VsZWN0b3IoYnV0dG9uU3VibWl0U2VsZWN0b3IpO1xuICAgICAgICAgICAgY29uc3QgYnV0dG9uQWNjZXB0QWxsID0gb2ZmQ2FudmFzLnF1ZXJ5U2VsZWN0b3IoYnV0dG9uQWNjZXB0QWxsU2VsZWN0b3IpO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3hlcyA9IEFycmF5LmZyb20ob2ZmQ2FudmFzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpKTtcbiAgICAgICAgICAgIGNvbnN0IHdyYXBwZXJUcmlnZ2VyID0gQXJyYXkuZnJvbShvZmZDYW52YXMucXVlcnlTZWxlY3RvckFsbCh3cmFwcGVyVG9nZ2xlU2VsZWN0b3IpKTtcblxuICAgICAgICAgICAgaWYgKGJ1dHRvbikge1xuICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKHN1Ym1pdEV2ZW50LCB0aGlzLl9oYW5kbGVTdWJtaXQuYmluZCh0aGlzLCBDb29raWVTdG9yYWdlKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChidXR0b25BY2NlcHRBbGwpIHtcbiAgICAgICAgICAgICAgICBidXR0b25BY2NlcHRBbGwuYWRkRXZlbnRMaXN0ZW5lcihzdWJtaXRFdmVudCwgdGhpcy5faGFuZGxlQWNjZXB0QWxsLmJpbmQodGhpcywgQ29va2llU3RvcmFnZSkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaGVja2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4ge1xuICAgICAgICAgICAgICAgIGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoc3VibWl0RXZlbnQsIHRoaXMuX2hhbmRsZUNoZWNrYm94LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHdyYXBwZXJUcmlnZ2VyLmZvckVhY2godHJpZ2dlciA9PiB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKHN1Ym1pdEV2ZW50LCB0aGlzLl9oYW5kbGVXcmFwcGVyVHJpZ2dlci5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHJldmVudCB0aGUgZXZlbnQgZGVmYXVsdCBlLmcuIGZvciBhbmNob3IgZWxlbWVudHMgdXNpbmcgdGhlIGhyZWYtc2VsZWN0b3JcbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2hhbmRsZUN1c3RvbUxpbmsoZXZlbnQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICB0aGlzLm9wZW5PZmZDYW52YXMoKTtcbiAgICB9XG5cbiAgICBfaGFuZGxlVXBkYXRlTGlzdGVuZXIoYWN0aXZlLCBpbmFjdGl2ZSkge1xuICAgICAgICBjb25zdCB1cGRhdGVkQ29va2llcyA9IHRoaXMuX2dldFVwZGF0ZWRDb29raWVzKGFjdGl2ZSwgaW5hY3RpdmUpO1xuXG4gICAgICAgIGRvY3VtZW50LiRlbWl0dGVyLnB1Ymxpc2goQ09PS0lFX0NPTkZJR1VSQVRJT05fVVBEQVRFLCB1cGRhdGVkQ29va2llcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGFyZSB0aGUgY3VycmVudCBpbi0vYWN0aXZlIGNvb2tpZXMgdG8gdGhlIGluaXRpYWxTdGF0ZSBhbmQgcmV0dXJuIHVwZGF0ZWQgY29va2llcyBvbmx5XG4gICAgICpcbiAgICAgKiBAcGFyYW0gYWN0aXZlXG4gICAgICogQHBhcmFtIGluYWN0aXZlXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZ2V0VXBkYXRlZENvb2tpZXMoYWN0aXZlLCBpbmFjdGl2ZSkge1xuICAgICAgICBjb25zdCB7IGxhc3RTdGF0ZSB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgdXBkYXRlZCA9IHt9O1xuXG4gICAgICAgIGFjdGl2ZS5mb3JFYWNoKGN1cnJlbnRDaGVja2JveCA9PiB7XG4gICAgICAgICAgICBpZiAobGFzdFN0YXRlLmluYWN0aXZlLmluY2x1ZGVzKGN1cnJlbnRDaGVja2JveCkpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVkW2N1cnJlbnRDaGVja2JveF0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBpbmFjdGl2ZS5mb3JFYWNoKGN1cnJlbnRDaGVja2JveCA9PiB7XG4gICAgICAgICAgICBpZiAobGFzdFN0YXRlLmFjdGl2ZS5pbmNsdWRlcyhjdXJyZW50Q2hlY2tib3gpKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlZFtjdXJyZW50Q2hlY2tib3hdID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFB1YmxpYyBtZXRob2QgdG8gb3BlbiB0aGUgb2ZmQ2FudmFzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufG51bGx9IGNhbGxiYWNrXG4gICAgICovXG4gICAgb3Blbk9mZkNhbnZhcyhjYWxsYmFjaykge1xuICAgICAgICBjb25zdCB7IG9mZkNhbnZhc1Bvc2l0aW9uIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHVybCA9IHdpbmRvdy5yb3V0ZXJbJ2Zyb250ZW5kLmNvb2tpZS5vZmZjYW52YXMnXTtcblxuICAgICAgICB0aGlzLl9oaWRlQ29va2llQmFyKCk7XG5cbiAgICAgICAgQWpheE9mZkNhbnZhcy5vcGVuKHVybCwgZmFsc2UsIHRoaXMuX29uT2ZmQ2FudmFzT3BlbmVkLmJpbmQodGhpcywgY2FsbGJhY2spLCBvZmZDYW52YXNQb3NpdGlvbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUHVibGljIG1ldGhvZCB0byBjbG9zZSB0aGUgb2ZmQ2FudmFzXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tcbiAgICAgKi9cbiAgICBjbG9zZU9mZkNhbnZhcyhjYWxsYmFjaykge1xuICAgICAgICBBamF4T2ZmQ2FudmFzLmNsb3NlKCk7XG5cbiAgICAgICAgdGhpcy5hamF4TW9kYWxFeHRlbnNpb24gPSBudWxsO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcml2YXRlIG1ldGhvZCB0byBhcHBseSBldmVudHMgdG8gdGhlIGNvb2tpZS1jb25maWd1cmF0aW9uIHRlbXBsYXRlXG4gICAgICogQWxzbyBzZXRzIHRoZSBpbml0aWFsIGNoZWNrYm94IHN0YXRlIGJhc2VkIG9uIGN1cnJlbnRseSBzZXQgY29va2llc1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfb25PZmZDYW52YXNPcGVuZWQoY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fcmVnaXN0ZXJPZmZDYW52YXNFdmVudHMoKTtcblxuICAgICAgICB0aGlzLmFqYXhNb2RhbEV4dGVuc2lvbiA9IG5ldyBBamF4TW9kYWxFeHRlbnNpb24oZmFsc2UpO1xuXG4gICAgICAgIHRoaXMuX3NldEluaXRpYWxTdGF0ZSgpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfaGlkZUNvb2tpZUJhcigpIHtcbiAgICAgICAgY29uc3QgY29va2llUGVybWlzc2lvblBsdWdpbiA9IFBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luSW5zdGFuY2VzKCdDb29raWVQZXJtaXNzaW9uJyk7XG5cbiAgICAgICAgaWYgKGNvb2tpZVBlcm1pc3Npb25QbHVnaW4gJiYgY29va2llUGVybWlzc2lvblBsdWdpblswXSkge1xuICAgICAgICAgICAgY29va2llUGVybWlzc2lvblBsdWdpblswXS5faGlkZUNvb2tpZUJhcigpO1xuICAgICAgICAgICAgY29va2llUGVybWlzc2lvblBsdWdpblswXS5fcmVtb3ZlQm9keVBhZGRpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjdXJyZW50IGNvb2tpZSBjb25maWd1cmF0aW9uIGFuZCBwcmVzZWxlY3QgY29oZXJlbnQgY2hlY2tib3hlc1xuICAgICAqIFJlcXVpcmVkIGNvb2tpZXMgYXJlIGFscmVhZHkgY2hlY2tlZCBpbiB0aGUgdGVtcGxhdGVcbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3NldEluaXRpYWxTdGF0ZSgpIHtcbiAgICAgICAgY29uc3Qgb2ZmQ2FudmFzID0gdGhpcy5fZ2V0T2ZmQ2FudmFzKCk7XG4gICAgICAgIGNvbnN0IGNvb2tpZXMgPSB0aGlzLl9nZXRDb29raWVzKCdhbGwnKTtcbiAgICAgICAgY29uc3QgYWN0aXZlQ29va2llcyA9IFtdO1xuICAgICAgICBjb25zdCBpbmFjdGl2ZUNvb2tpZXMgPSBbXTtcblxuICAgICAgICBjb29raWVzLmZvckVhY2goKHsgY29va2llLCByZXF1aXJlZCB9KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IENvb2tpZVN0b3JhZ2UuZ2V0SXRlbShjb29raWUpO1xuICAgICAgICAgICAgaWYgKGlzQWN0aXZlIHx8IHJlcXVpcmVkKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZlQ29va2llcy5wdXNoKGNvb2tpZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGluYWN0aXZlQ29va2llcy5wdXNoKGNvb2tpZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubGFzdFN0YXRlID0ge1xuICAgICAgICAgICAgYWN0aXZlOiBhY3RpdmVDb29raWVzLFxuICAgICAgICAgICAgaW5hY3RpdmU6IGluYWN0aXZlQ29va2llc1xuICAgICAgICB9O1xuXG4gICAgICAgIGFjdGl2ZUNvb2tpZXMuZm9yRWFjaChhY3RpdmVDb29raWUgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gb2ZmQ2FudmFzLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWNvb2tpZT1cIiR7YWN0aXZlQ29va2llfVwiXWApO1xuXG4gICAgICAgICAgICB0YXJnZXQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9jaGlsZENoZWNrYm94RXZlbnQodGFyZ2V0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnJvbSBjbGljayB0YXJnZXQsIHRyeSB0byBmaW5kIHRoZSBjb29raWUgZ3JvdXAgY29udGFpbmVyIGFuZCB0b2dnbGUgdGhlIG9wZW4gc3RhdGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2hhbmRsZVdyYXBwZXJUcmlnZ2VyKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHsgZW50cmllc0FjdGl2ZUNsYXNzLCBlbnRyaWVzQ2xhc3MsIGdyb3VwQ2xhc3MgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IGV2ZW50O1xuXG4gICAgICAgIGNvbnN0IGNvb2tpZUVudHJ5Q29udGFpbmVyID0gdGhpcy5fZmluZFBhcmVudEVsKHRhcmdldCwgZW50cmllc0NsYXNzLCBncm91cENsYXNzKTtcblxuICAgICAgICBpZiAoY29va2llRW50cnlDb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZSA9IGNvb2tpZUVudHJ5Q29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhlbnRyaWVzQWN0aXZlQ2xhc3MpO1xuXG4gICAgICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgY29va2llRW50cnlDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShlbnRyaWVzQWN0aXZlQ2xhc3MpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb29raWVFbnRyeUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGVudHJpZXNBY3RpdmVDbGFzcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgdGFyZ2V0IGNoZWNrYm94IGlzIGEgcGFyZW50IG9yIGEgY2hpbGQgY2hlY2tib3hcbiAgICAgKlxuICAgICAqIEBwYXJhbSBldmVudFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2hhbmRsZUNoZWNrYm94KGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IHsgcGFyZW50SW5wdXRDbGFzcyB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCB7IHRhcmdldCB9ID0gZXZlbnQ7XG5cbiAgICAgICAgY29uc3QgY2FsbGJhY2sgPSB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKHBhcmVudElucHV0Q2xhc3MpID8gdGhpcy5fcGFyZW50Q2hlY2tib3hFdmVudCA6IHRoaXMuX2NoaWxkQ2hlY2tib3hFdmVudDtcblxuICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXMsIHRhcmdldCk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBSZWN1cnNpdmVseSBjaGVja3MgdGhlIHByb3ZpZGVkIGVsZW1lbnRzIHBhcmVudCBmb3IgdGhlIGZpcnN0IGNsYXNzIHBhcmFtZXRlclxuICAgICAqIFN0b3BzIHRoZSByZWN1cnNpb24sIGlmIHRoZSBwYXJlbnRFbGVtZW50IGNvbnRhaW5zIHRoZSBzZWNvbmQgY2xhc3MgcGFyYW1ldGVyXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZWxcbiAgICAgKiBAcGFyYW0gZmluZENsYXNzXG4gICAgICogQHBhcmFtIGFib3J0Q2xhc3NcbiAgICAgKiBAcmV0dXJucyB7KnxIVE1MRWxlbWVudHwqfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2ZpbmRQYXJlbnRFbChlbCwgZmluZENsYXNzLCBhYm9ydENsYXNzID0gbnVsbCkge1xuICAgICAgICB3aGlsZSghIWVsICYmICFlbC5jbGFzc0xpc3QuY29udGFpbnMoYWJvcnRDbGFzcykpIHtcbiAgICAgICAgICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoZmluZENsYXNzKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIF9pc0NoZWNrZWQodGFyZ2V0KSB7XG4gICAgICAgIHJldHVybiAhIXRhcmdldC5jaGVja2VkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlLS9zZWxlY3QgYWxsIGNoZWNrYm94ZXMgb2YgdGhlIGN1cnJlbnQgZ3JvdXBcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXRcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9wYXJlbnRDaGVja2JveEV2ZW50KHRhcmdldCkge1xuICAgICAgICBjb25zdCB7IGdyb3VwQ2xhc3MgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgbmV3U3RhdGUgPSB0aGlzLl9pc0NoZWNrZWQodGFyZ2V0KTtcbiAgICAgICAgY29uc3QgZ3JvdXAgPSB0aGlzLl9maW5kUGFyZW50RWwodGFyZ2V0LCBncm91cENsYXNzKTtcblxuICAgICAgICB0aGlzLl90b2dnbGVXaG9sZUdyb3VwKG5ld1N0YXRlLCBncm91cCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBUcmlnZ2VyIGEgY2hhbmdlIGV2ZW50IGZvciB0aGUgXCJzZWxlY3QtYWxsXCIgY2hlY2tib3ggb2YgdGhlIGNoaWxkcyBncm91cFxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2NoaWxkQ2hlY2tib3hFdmVudCh0YXJnZXQpIHtcbiAgICAgICAgY29uc3QgeyBncm91cENsYXNzIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IG5ld1N0YXRlID0gdGhpcy5faXNDaGVja2VkKHRhcmdldCk7XG4gICAgICAgIGNvbnN0IGdyb3VwID0gdGhpcy5fZmluZFBhcmVudEVsKHRhcmdldCwgZ3JvdXBDbGFzcyk7XG5cbiAgICAgICAgdGhpcy5fdG9nZ2xlUGFyZW50Q2hlY2tib3gobmV3U3RhdGUsIGdyb3VwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb29nbGUgZWFjaCBjaGVja2JveCBpbnNpZGUgdGhlIGdpdmVuIGdyb3VwXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc3RhdGVcbiAgICAgKiBAcGFyYW0gZ3JvdXBcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF90b2dnbGVXaG9sZUdyb3VwKHN0YXRlLCBncm91cCkge1xuICAgICAgICBBcnJheS5mcm9tKGdyb3VwLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0JykpLmZvckVhY2goY2hlY2tib3ggPT4ge1xuICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHN0YXRlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGUgYSBncm91cHMgXCJzZWxlY3QtYWxsXCIgY2hlY2tib3ggYWNjb3JkaW5nIHRvIGNoYW5nZXMgdG8gaXRzIGNoaWxkIGNoZWNrYm94ZXNcbiAgICAgKiBcIkNoZWNrLCBpZiBhbnkgY2hpbGQgY2hlY2tib3ggaXMgY2hlY2tlZFwiIC8gXCJVbmNoZWNrLCBpZiBubyBjaGlsZCBjaGVja2JveGVzIGFyZSBjaGVja2VkXCJcbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZVxuICAgICAqIEBwYXJhbSBncm91cFxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3RvZ2dsZVBhcmVudENoZWNrYm94KHN0YXRlLCBncm91cCkge1xuICAgICAgICBjb25zdCB7IHBhcmVudElucHV0U2VsZWN0b3IgfSA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgY29uc3QgY2hlY2tib3hlcyA9IEFycmF5LmZyb20oZ3JvdXAucXVlcnlTZWxlY3RvckFsbChgaW5wdXQ6bm90KCR7cGFyZW50SW5wdXRTZWxlY3Rvcn0pYCkpO1xuICAgICAgICBjb25zdCBhY3RpdmVDaGVja2JveGVzID0gQXJyYXkuZnJvbShncm91cC5xdWVyeVNlbGVjdG9yQWxsKGBpbnB1dDpub3QoJHtwYXJlbnRJbnB1dFNlbGVjdG9yfSk6Y2hlY2tlZGApKTtcblxuICAgICAgICBpZiAoY2hlY2tib3hlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRDaGVja2JveCA9IGdyb3VwLnF1ZXJ5U2VsZWN0b3IocGFyZW50SW5wdXRTZWxlY3Rvcik7XG5cbiAgICAgICAgICAgIGlmIChwYXJlbnRDaGVja2JveCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBhY3RpdmVDaGVja2JveGVzLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXRlcm1pbmF0ZSA9IGNoZWNrZWQgJiYgYWN0aXZlQ2hlY2tib3hlcy5sZW5ndGggIT09IGNoZWNrYm94ZXMubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgcGFyZW50Q2hlY2tib3guY2hlY2tlZCA9IGNoZWNrZWQ7XG4gICAgICAgICAgICAgICAgcGFyZW50Q2hlY2tib3guaW5kZXRlcm1pbmF0ZSA9IGluZGV0ZXJtaW5hdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciB0aGUgJ1NhdmUnIGJ1dHRvbiBpbnNpZGUgdGhlIG9mZkNhbnZhc1xuICAgICAqXG4gICAgICogUmVtb3ZlcyB1bnNlbGVjdGVkIGNvb2tpZXMsIGlmIGFscmVhZHkgc2V0XG4gICAgICogU2V0cyBvciByZWZyZXNoZXMgc2VsZWN0ZWQgY29va2llc1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfaGFuZGxlU3VibWl0KCkge1xuICAgICAgICBjb25zdCBhY3RpdmVDb29raWVzID0gdGhpcy5fZ2V0Q29va2llcygnYWN0aXZlJyk7XG4gICAgICAgIGNvbnN0IGluYWN0aXZlQ29va2llcyA9IHRoaXMuX2dldENvb2tpZXMoJ2luYWN0aXZlJyk7XG4gICAgICAgIGNvbnN0IHsgY29va2llUHJlZmVyZW5jZSB9ID0gdGhpcy5vcHRpb25zO1xuXG4gICAgICAgIGNvbnN0IGFjdGl2ZUNvb2tpZU5hbWVzID0gW107XG4gICAgICAgIGNvbnN0IGluYWN0aXZlQ29va2llTmFtZXMgPSBbXTtcblxuICAgICAgICBpbmFjdGl2ZUNvb2tpZXMuZm9yRWFjaCgoeyBjb29raWUgfSkgPT4ge1xuICAgICAgICAgICAgaW5hY3RpdmVDb29raWVOYW1lcy5wdXNoKGNvb2tpZSk7XG5cbiAgICAgICAgICAgIGlmIChDb29raWVTdG9yYWdlLmdldEl0ZW0oY29va2llKSkge1xuICAgICAgICAgICAgICAgIENvb2tpZVN0b3JhZ2UucmVtb3ZlSXRlbShjb29raWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ29va2llcyB3aXRob3V0IHZhbHVlIGFyZSBwYXNzZWQgdG8gdGhlIHVwZGF0ZUxpc3RlbmVyXG4gICAgICAgICAqICggc2VlIFwiX2hhbmRsZVVwZGF0ZUxpc3RlbmVyXCIgbWV0aG9kIClcbiAgICAgICAgICovXG4gICAgICAgIGFjdGl2ZUNvb2tpZXMuZm9yRWFjaCgoeyBjb29raWUsIHZhbHVlLCBleHBpcmF0aW9uIH0pID0+IHtcbiAgICAgICAgICAgIGFjdGl2ZUNvb2tpZU5hbWVzLnB1c2goY29va2llKTtcblxuICAgICAgICAgICAgaWYgKGNvb2tpZSAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIENvb2tpZVN0b3JhZ2Uuc2V0SXRlbShjb29raWUsIHZhbHVlLCBleHBpcmF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgQ29va2llU3RvcmFnZS5zZXRJdGVtKGNvb2tpZVByZWZlcmVuY2UsICcxJywgJzMwJyk7XG5cbiAgICAgICAgdGhpcy5faGFuZGxlVXBkYXRlTGlzdGVuZXIoYWN0aXZlQ29va2llTmFtZXMsIGluYWN0aXZlQ29va2llTmFtZXMpO1xuICAgICAgICB0aGlzLmNsb3NlT2ZmQ2FudmFzKCk7XG4gICAgfVxuXG4gICAgYWNjZXB0QWxsQ29va2llcygpIHtcbiAgICAgICAgdGhpcy5vcGVuT2ZmQ2FudmFzKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUFjY2VwdEFsbCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFdmVudCBoYW5kbGVyIGZvciB0aGUgJ0FsbG93IGFsbCctYnV0dG9uIGluIHRoZSBvZmYgY2FudmFzIHZpZXcuXG4gICAgICpcbiAgICAgKiBUaGlzIHdpbGwgc2V0IGFuZCByZWZyZXNoIGFsbCByZWdpc3RlcmVkIGNvb2tpZXMuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF9oYW5kbGVBY2NlcHRBbGwoKSB7XG4gICAgICAgIGNvbnN0IGFsbENvb2tpZXMgPSB0aGlzLl9nZXRDb29raWVzKCdhbGwnKTtcbiAgICAgICAgY29uc3QgeyBjb29raWVQcmVmZXJlbmNlIH0gPSB0aGlzLm9wdGlvbnM7XG5cbiAgICAgICAgYWxsQ29va2llcy5mb3JFYWNoKCh7IGNvb2tpZSwgdmFsdWUsIGV4cGlyYXRpb24gfSkgPT4ge1xuICAgICAgICAgICAgaWYgKGNvb2tpZSAmJiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIENvb2tpZVN0b3JhZ2Uuc2V0SXRlbShjb29raWUsIHZhbHVlLCBleHBpcmF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgQ29va2llU3RvcmFnZS5zZXRJdGVtKGNvb2tpZVByZWZlcmVuY2UsICcxJywgJzMwJyk7XG5cbiAgICAgICAgdGhpcy5faGFuZGxlVXBkYXRlTGlzdGVuZXIoYWxsQ29va2llcy5tYXAoKHsgY29va2llIH0pID0+IGNvb2tpZSksIFtdKTtcbiAgICAgICAgdGhpcy5jbG9zZU9mZkNhbnZhcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBjb29raWVzIHBhc3NlZCB0byB0aGUgY29uZmlndXJhdGlvbiB0ZW1wbGF0ZVxuICAgICAqIENhbiBiZSBmaWx0ZXJlZCBieSBcImFsbFwiLCBcImFjdGl2ZVwiIG9yIFwiaW5hY3RpdmVcIlxuICAgICAqXG4gICAgICogQWx3YXlzIGV4Y2x1ZGVzIFwicmVxdWlyZWRcIiBjb29raWVzLCBzaW5jZSB0aGV5IGFyZSBhc3N1bWVkIHRvIGJlIHNldCBzZXBhcmF0ZWx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHR5cGVcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfZ2V0Q29va2llcyh0eXBlID0gJ2FsbCcpIHtcbiAgICAgICAgY29uc3QgeyBjb29raWVTZWxlY3RvciB9ID0gdGhpcy5vcHRpb25zO1xuICAgICAgICBjb25zdCBvZmZDYW52YXMgPSB0aGlzLl9nZXRPZmZDYW52YXMoKTtcblxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShvZmZDYW52YXMucXVlcnlTZWxlY3RvckFsbChjb29raWVTZWxlY3RvcikpLmZpbHRlcihjb29raWVJbnB1dCA9PiB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdhbGwnOiByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjYXNlICdhY3RpdmUnOiByZXR1cm4gdGhpcy5faXNDaGVja2VkKGNvb2tpZUlucHV0KTtcbiAgICAgICAgICAgICAgICBjYXNlICdpbmFjdGl2ZSc6IHJldHVybiAhdGhpcy5faXNDaGVja2VkKGNvb2tpZUlucHV0KTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLm1hcChmaWx0ZXJlZElucHV0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHsgY29va2llLCBjb29raWVWYWx1ZSwgY29va2llRXhwaXJhdGlvbiwgY29va2llUmVxdWlyZWQgfSA9IGZpbHRlcmVkSW5wdXQuZGF0YXNldDtcbiAgICAgICAgICAgIHJldHVybiB7IGNvb2tpZSwgdmFsdWU6IGNvb2tpZVZhbHVlLCBleHBpcmF0aW9uOiBjb29raWVFeHBpcmF0aW9uLCByZXF1aXJlZDogY29va2llUmVxdWlyZWQgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBvZmZjYW52YXMgZWxlbWVudCBpZiBhdmFpbGFibGVcbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX2dldE9mZkNhbnZhcygpIHtcbiAgICAgICAgY29uc3QgZWxlbWVudHMgPSBPZmZDYW52YXMgPyBPZmZDYW52YXMuZ2V0T2ZmQ2FudmFzKCkgOiBbXTtcblxuICAgICAgICByZXR1cm4gKGVsZW1lbnRzICYmIGVsZW1lbnRzLmxlbmd0aCA+IDApID8gZWxlbWVudHNbMF0gOiBmYWxzZTtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW1CQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBS0E7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFFQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7QUFPQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFLQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7O0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7QUFNQTtBQUFBO0FBQUE7QUFJQTtBQUVBO0FBQ0E7QUFHQTs7Ozs7Ozs7Ozs7OztBQVVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7QUFPQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7Ozs7QUFRQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7OztBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFFQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7O0FBSUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7O0FBVUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBSkE7QUFNQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBRUE7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFFQTtBQUNBOzs7O0FBN2NBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWZBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///t8WJ\n");

/***/ }),

/***/ "v0id":
/*!***********************************************************************************************************!*\
  !*** /app/custom/plugins/WbmTagManagerEcomm/src/Resources/app/storefront/src/plugin/promotions.plugin.js ***!
  \***********************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Promotions; });\n/* harmony import */ var src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! src/plugin-system/plugin.class */ \"FGIj\");\n/* harmony import */ var src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! src/helper/dom-access.helper */ \"gHbT\");\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\nvar Promotions =\n/*#__PURE__*/\nfunction (_Plugin) {\n  _inherits(Promotions, _Plugin);\n\n  function Promotions() {\n    _classCallCheck(this, Promotions);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Promotions).apply(this, arguments));\n  }\n\n  _createClass(Promotions, [{\n    key: \"init\",\n    value: function init() {\n      if (!window.wbmScriptIsSet) {\n        return;\n      }\n\n      var self = this;\n      var promotionObjects = false;\n\n      try {\n        promotionObjects = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelectorAll(this.el, '[data-promotion]');\n      } catch (e) {\n        // just no object found\n        return;\n      }\n\n      this.promotions = [];\n      promotionObjects.forEach(function (object) {\n        self.registerEvent(object);\n      });\n      this.pushPromoView();\n    }\n  }, {\n    key: \"registerEvent\",\n    value: function registerEvent(object) {\n      var self = this;\n\n      try {\n        var promotionLinks = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].querySelectorAll(object, 'a, area');\n        promotionLinks.forEach(function (link) {\n          var dataSet = JSON.parse(JSON.stringify(link.dataset));\n\n          if (typeof dataSet.promotionId === 'undefined' && dataSet.promotionName === 'undefinded') {\n            return;\n          }\n\n          self.addPromotion(dataSet);\n          link.addEventListener('click', function (event) {\n            self.onPromotionClicked(event, link, dataSet);\n          });\n        });\n      } catch (e) {// just no object found\n      }\n    }\n  }, {\n    key: \"onPromotionClicked\",\n    value: function onPromotionClicked(event, link, dataSet) {\n      event.preventDefault();\n      dataLayer.push({\n        event: 'promotionClick',\n        ecommerce: {\n          promoClick: {\n            promotions: [{\n              id: dataSet.promotionId || '',\n              name: dataSet.promotionName || '',\n              creative: dataSet.promotionCreative || '',\n              position: dataSet.promotionPosition || ''\n            }]\n          }\n        },\n        eventCallback: function eventCallback() {\n          document.location = src_helper_dom_access_helper__WEBPACK_IMPORTED_MODULE_1__[\"default\"].getAttribute(link, 'href');\n        }\n      });\n    }\n  }, {\n    key: \"addPromotion\",\n    value: function addPromotion(dataSet) {\n      var promotion = {\n        id: dataSet.promotionId || '',\n        name: dataSet.promotionName || '',\n        creative: dataSet.promotionCreative || '',\n        position: dataSet.promotionPosition || ''\n      };\n      this.promotions.push(promotion);\n    }\n  }, {\n    key: \"pushPromoView\",\n    value: function pushPromoView() {\n      if (this.promotions.length > 0) {\n        window.dataLayer.push({\n          event: 'promotions',\n          ecommerce: {\n            promoView: {\n              promotions: this.promotions\n            }\n          }\n        });\n      }\n    }\n  }]);\n\n  return Promotions;\n}(src_plugin_system_plugin_class__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidjBpZC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vYXBwL2N1c3RvbS9wbHVnaW5zL1dibVRhZ01hbmFnZXJFY29tbS9zcmMvUmVzb3VyY2VzL2FwcC9zdG9yZWZyb250L3NyYy9wbHVnaW4vcHJvbW90aW9ucy5wbHVnaW4uanM/MDdmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGx1Z2luIGZyb20gJ3NyYy9wbHVnaW4tc3lzdGVtL3BsdWdpbi5jbGFzcyc7XG5pbXBvcnQgRG9tQWNjZXNzIGZyb20gJ3NyYy9oZWxwZXIvZG9tLWFjY2Vzcy5oZWxwZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9tb3Rpb25zIGV4dGVuZHMgUGx1Z2luIHtcbiAgICBpbml0KCkge1xuICAgICAgICBpZiAoIXdpbmRvdy53Ym1TY3JpcHRJc1NldCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIGxldCBwcm9tb3Rpb25PYmplY3RzID0gZmFsc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwcm9tb3Rpb25PYmplY3RzID0gRG9tQWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5lbCwgJ1tkYXRhLXByb21vdGlvbl0nKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8ganVzdCBubyBvYmplY3QgZm91bmRcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucHJvbW90aW9ucyA9IFtdO1xuXG4gICAgICAgIHByb21vdGlvbk9iamVjdHMuZm9yRWFjaCgob2JqZWN0KSA9PiB7XG4gICAgICAgICAgICBzZWxmLnJlZ2lzdGVyRXZlbnQob2JqZWN0KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5wdXNoUHJvbW9WaWV3KCk7XG4gICAgfVxuXG4gICAgcmVnaXN0ZXJFdmVudChvYmplY3QpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwcm9tb3Rpb25MaW5rcyA9IERvbUFjY2Vzcy5xdWVyeVNlbGVjdG9yQWxsKG9iamVjdCwgJ2EsIGFyZWEnKTtcblxuICAgICAgICAgICAgcHJvbW90aW9uTGlua3MuZm9yRWFjaCgobGluaykgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGFTZXQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGxpbmsuZGF0YXNldCkpO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVNldC5wcm9tb3Rpb25JZCA9PT0gJ3VuZGVmaW5lZCcgJiYgZGF0YVNldC5wcm9tb3Rpb25OYW1lID09PSAndW5kZWZpbmRlZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZWxmLmFkZFByb21vdGlvbihkYXRhU2V0KTtcblxuICAgICAgICAgICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5vblByb21vdGlvbkNsaWNrZWQoZXZlbnQsIGxpbmssIGRhdGFTZXQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIC8vIGp1c3Qgbm8gb2JqZWN0IGZvdW5kXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvblByb21vdGlvbkNsaWNrZWQoZXZlbnQsIGxpbmssIGRhdGFTZXQpIHtcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XG4gICAgICAgICAgICBldmVudDogJ3Byb21vdGlvbkNsaWNrJyxcbiAgICAgICAgICAgIGVjb21tZXJjZToge1xuICAgICAgICAgICAgICAgIHByb21vQ2xpY2s6IHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbW90aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBkYXRhU2V0LnByb21vdGlvbklkIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGRhdGFTZXQucHJvbW90aW9uTmFtZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGl2ZTogZGF0YVNldC5wcm9tb3Rpb25DcmVhdGl2ZSB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogZGF0YVNldC5wcm9tb3Rpb25Qb3NpdGlvbiB8fCAnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXZlbnRDYWxsYmFjazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uID0gRG9tQWNjZXNzLmdldEF0dHJpYnV0ZShsaW5rLCAnaHJlZicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhZGRQcm9tb3Rpb24oZGF0YVNldCkge1xuICAgICAgICBjb25zdCBwcm9tb3Rpb24gPSB7XG4gICAgICAgICAgICBpZDogZGF0YVNldC5wcm9tb3Rpb25JZCB8fCAnJyxcbiAgICAgICAgICAgIG5hbWU6IGRhdGFTZXQucHJvbW90aW9uTmFtZSB8fCAnJyxcbiAgICAgICAgICAgIGNyZWF0aXZlOiBkYXRhU2V0LnByb21vdGlvbkNyZWF0aXZlIHx8ICcnLFxuICAgICAgICAgICAgcG9zaXRpb246IGRhdGFTZXQucHJvbW90aW9uUG9zaXRpb24gfHwgJydcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnByb21vdGlvbnMucHVzaChwcm9tb3Rpb24pO1xuICAgIH1cblxuICAgIHB1c2hQcm9tb1ZpZXcoKSB7XG4gICAgICAgIGlmICh0aGlzLnByb21vdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgd2luZG93LmRhdGFMYXllci5wdXNoKHtcbiAgICAgICAgICAgICAgICBldmVudDogJ3Byb21vdGlvbnMnLFxuICAgICAgICAgICAgICAgIGVjb21tZXJjZToge1xuICAgICAgICAgICAgICAgICAgICBwcm9tb1ZpZXc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21vdGlvbnM6IHRoaXMucHJvbW90aW9uc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTs7O0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBRkE7QUFEQTtBQVdBO0FBQ0E7QUFDQTtBQWZBO0FBaUJBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU9BO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFEQTtBQUZBO0FBUUE7QUFDQTs7OztBQXpGQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///v0id\n");

/***/ })

},[["Bys/","runtime","vendor-node","vendor-shared"]]]);